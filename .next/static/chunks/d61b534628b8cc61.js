(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,a,s)=>{a.exports=e.r(76562)},11616,e=>{"use strict";async function a(e,s={}){let t=new Headers(s.headers||{}),r="u">typeof FormData&&s.body instanceof FormData;!s.body||r||t.has("Content-Type")||t.set("Content-Type","application/json");if(!1!==s.auth){let e=window.localStorage.getItem("rp_user");e&&t.set("x-rp-user",e)}let l=await fetch(e,{...s,headers:t});if(401===l.status||403===l.status){let e=window.location.pathname+window.location.search;window.location.href=`/login?next=${encodeURIComponent(e)}`}return l}e.s(["rpFetch",()=>a])},90510,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(18566),r=e.i(11616);function l(){let e=(0,t.useRouter)(),{id:l}=(0,t.useParams)(),[i,n]=(0,s.useState)(!0),[c,o]=(0,s.useState)(null),[d,p]=(0,s.useState)(!1),[u,m]=(0,s.useState)(null),[h,v]=(0,s.useState)(null),[j,x]=(0,s.useState)("");(0,s.useEffect)(()=>{try{let e=localStorage.getItem("rp_user");e&&x(String(JSON.parse(e)?.role||""))}catch{}},[]);let N=(0,s.useMemo)(()=>"admin"===String(j||"").toLowerCase(),[j]);async function b(){if(h)try{p(!0),o(null);let a=await (0,r.rpFetch)("/api/customers/update",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({...h})}),s=await a.json().catch(()=>({}));if(!a.ok||!s.ok)throw Error(s.error||"Failed to save");m("Saved ✅"),window.setTimeout(()=>m(null),2200),e.replace("/customers")}catch(e){o(e?.message||"Save failed")}finally{p(!1)}}return((0,s.useEffect)(()=>{let e=!0;async function a(){try{n(!0),o(null);let a=await (0,r.rpFetch)(`/api/customers/get/${l}`,{cache:"no-store"}),s=await a.json().catch(()=>({}));if(!a.ok||!s.ok)throw Error(s.error||"Failed to load customer");if(!e)return;v(s.customer)}catch(a){if(!e)return;o(a?.message||"Error")}finally{e&&n(!1)}}return l&&a(),()=>{e=!1}},[l]),i)?(0,a.jsxs)("div",{className:"rp-shell",children:[(0,a.jsx)("div",{className:"rp-topbar",children:(0,a.jsx)("div",{className:"rp-topbar__title",children:"Edit Customer"})}),(0,a.jsx)("div",{className:"rp-card",style:{marginTop:14},children:(0,a.jsx)("div",{className:"rp-muted",children:"Loading customer…"})})]}):c?(0,a.jsx)("div",{className:"rp-print-error",children:c}):h?(0,a.jsxs)("div",{className:"rp-shell",children:[u&&(0,a.jsx)("div",{className:"rp-toast",children:u}),(0,a.jsxs)("div",{className:"rp-topbar",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"rp-topbar__title",children:"Edit Customer"}),(0,a.jsx)("div",{className:"rp-topbar__sub",children:"Update details • Premium UX"})]}),(0,a.jsxs)("div",{className:"rp-topbar__actions",children:[(0,a.jsx)("button",{className:"rp-ui-btn",onClick:()=>e.back(),type:"button",children:"Back"}),(0,a.jsx)("button",{className:"rp-ui-btn rp-ui-btn--brand",onClick:b,disabled:d||!N,type:"button",title:N?"":"Admin only",children:d?"Saving…":"Save"})]})]}),(0,a.jsx)("div",{className:"rp-card",style:{marginTop:12},children:(0,a.jsxs)("div",{className:"rp-card-body",children:[(0,a.jsxs)("div",{className:"rp-grid-2",children:[(0,a.jsxs)("label",{className:"rp-field",children:[(0,a.jsx)("div",{className:"rp-label",children:"Customer Name"}),(0,a.jsx)("input",{className:"rp-input",value:h.name||"",onChange:e=>v({...h,name:e.target.value})})]}),(0,a.jsxs)("label",{className:"rp-field",children:[(0,a.jsx)("div",{className:"rp-label",children:"Phone"}),(0,a.jsx)("input",{className:"rp-input",value:h.phone||"",onChange:e=>v({...h,phone:e.target.value})})]}),(0,a.jsxs)("label",{className:"rp-field",children:[(0,a.jsx)("div",{className:"rp-label",children:"Email"}),(0,a.jsx)("input",{className:"rp-input",value:h.email||"",onChange:e=>v({...h,email:e.target.value})})]}),(0,a.jsxs)("label",{className:"rp-field",children:[(0,a.jsx)("div",{className:"rp-label",children:"Customer Code"}),(0,a.jsx)("input",{className:"rp-input",value:h.customer_code||"",onChange:e=>v({...h,customer_code:e.target.value})})]}),(0,a.jsxs)("label",{className:"rp-field rp-col-span-2",children:[(0,a.jsx)("div",{className:"rp-label",children:"Address"}),(0,a.jsx)("input",{className:"rp-input",value:h.address||"",onChange:e=>v({...h,address:e.target.value})})]})]}),!N&&(0,a.jsx)("div",{className:"rp-note rp-note--warn",style:{marginTop:12},children:"Admin-only: you can view this page, but cannot save changes."})]})})]}):(0,a.jsx)("div",{className:"rp-print-error",children:"Customer not found"})}e.s(["default",()=>l])}]);