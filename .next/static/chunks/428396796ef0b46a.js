(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,s,r)=>{s.exports=e.r(76562)},17092,e=>{"use strict";var s=e.i(43476),r=e.i(71645),a=e.i(18566);function t(){let e=(0,a.useRouter)(),t=(0,a.useSearchParams)(),[l,o]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[c,d]=(0,r.useState)(!1),[m,u]=(0,r.useState)(!0),[p,h]=(0,r.useState)(!1),[g,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{try{let e=localStorage.getItem("rp_remember_username");e&&o(e)}catch{}},[]);let b=(0,r.useMemo)(()=>{let e=t.get("returnTo"),s=t.get("next"),r=e||s||"/";return!r.startsWith("/")||r.startsWith("//")?"/":r},[t]);async function f(s){if(s.preventDefault(),p)return;let r=l.trim();if(!r||!n)return void x("Username and password are required.");h(!0),x(null);try{localStorage.removeItem("rp_user");let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:n})}),a=await s.json().catch(()=>({}));if(!s.ok||a?.ok!==!0)throw Error(a?.error||"Invalid username or password");let t=a.session;if(!t)throw Error("Login response missing session");localStorage.setItem("rp_user",JSON.stringify(t)),m?localStorage.setItem("rp_remember_username",r):localStorage.removeItem("rp_remember_username"),e.replace(b)}catch(e){try{localStorage.removeItem("rp_user")}catch{}x(e?.message||"Login failed")}finally{h(!1)}}return(0,s.jsx)("div",{className:"rp-login-wrap",children:(0,s.jsxs)("div",{className:"rp-login-card",children:[(0,s.jsxs)("div",{className:"rp-login-top",children:[(0,s.jsx)("div",{className:"rp-login-logo-bg",children:(0,s.jsx)("img",{src:"/images/logo/logo.png",alt:"Ram Pottery Ltd",width:44,height:44})}),(0,s.jsx)("h1",{className:"rp-login-title",children:"RamPotteryHub"}),(0,s.jsx)("p",{className:"rp-login-sub",children:"Secure access • Admin & Staff"})]}),(0,s.jsxs)("form",{onSubmit:f,className:"rp-login-form",children:[(0,s.jsxs)("label",{className:"rp-login-field",children:[(0,s.jsx)("span",{children:"Username"}),(0,s.jsx)("input",{value:l,onChange:e=>o(e.target.value),autoComplete:"username",inputMode:"text",placeholder:"e.g. sales01",disabled:p})]}),(0,s.jsxs)("label",{className:"rp-login-field",children:[(0,s.jsx)("span",{children:"Password"}),(0,s.jsx)("input",{type:c?"text":"password",value:n,onChange:e=>i(e.target.value),autoComplete:"current-password",placeholder:"••••••••",disabled:p})]}),(0,s.jsxs)("div",{className:"rp-login-options",children:[(0,s.jsxs)("label",{className:"rp-check",children:[(0,s.jsx)("input",{type:"checkbox",checked:c,onChange:()=>d(!c),disabled:p}),"Show password"]}),(0,s.jsxs)("label",{className:"rp-check",children:[(0,s.jsx)("input",{type:"checkbox",checked:m,onChange:()=>u(!m),disabled:p}),"Remember username"]})]}),g&&(0,s.jsx)("div",{className:"rp-login-error",children:g}),(0,s.jsx)("button",{className:"rp-login-btn",disabled:p,children:p?"Signing in…":"Sign in"}),(0,s.jsx)("div",{className:"rp-login-footnote",children:"If you forgot your password, contact the system administrator."})]})]})})}e.s(["default",()=>t])}]);