{"version":3,"sources":["../../../../app/credit-notes/new/CreditNoteNewClient.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport Image from \"next/image\";\r\nimport { useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport { supabase } from \"@/lib/supabaseClient\";\r\n\r\nconst VAT_RATE = 0.15;\r\n\r\nconst COMPANY = {\r\n  name: \"RAM POTTERY LTD\",\r\n  tagline1: \"MANUFACTURER & IMPORTER OF QUALITY CLAY\",\r\n  tagline2: \"PRODUCTS AND OTHER RELIGIOUS ITEMS\",\r\n  address: \"Robert Kennedy Street, Reunion Maurel, Petit Raffray - Mauritius\",\r\n  tel1: \"+230 57788884\",\r\n  tel2: \"+230 58060268\",\r\n  tel3: \"+230 52522844\",\r\n  email: \"info@rampottery.com\",\r\n  web: \"www.rampottery.com\",\r\n  brn: \"C17144377\",\r\n  vat: \"VAT:123456789\",\r\n};\r\n\r\ntype Customer = { id: number; name: string; customer_code: string | null };\r\n\r\n/**\r\n * ‚úÖ Important:\r\n * - I added units_per_box because Invoice needs it.\r\n * - If your DB column is different, tell me the exact name and I will switch it.\r\n */\r\ntype Product = {\r\n  id: number;\r\n  sku: string | null;\r\n  name: string | null;\r\n  selling_price: number | null;\r\n  units_per_box?: number | null; // optional\r\n  unit_per_box?: number | null; // fallback alt name (if exists)\r\n};\r\n\r\ntype UOM = \"BOX\" | \"PCS\";\r\n\r\ntype CNItem = {\r\n  id: number;\r\n\r\n  productId: string;\r\n  sku: string;\r\n  description: string;\r\n\r\n  uom: UOM;\r\n  box_qty: number; // the qty typed in the UOM+Qty cell (BOX count or PCS count)\r\n\r\n  units_per_box: number; // auto from product (default 1)\r\n  total_qty: number; // auto computed\r\n\r\n  unitExcl: number;\r\n  unitVat: number;\r\n  unitIncl: number;\r\n  lineTotal: number;\r\n};\r\n\r\nfunction n2(v: any) {\r\n  const x = Number(v ?? 0);\r\n  return Number.isFinite(x) ? x : 0;\r\n}\r\n\r\nfunction round2(n: number) {\r\n  return +n.toFixed(2);\r\n}\r\n\r\nfunction computeTotalQty(uom: UOM, boxQty: number, unitsPerBox: number) {\r\n  const q = n2(boxQty);\r\n  const upb = Math.max(1, n2(unitsPerBox));\r\n  if (uom === \"BOX\") return Math.max(0, Math.floor(q) * upb);\r\n  return Math.max(0, Math.floor(q));\r\n}\r\n\r\nfunction recalc(item: CNItem): CNItem {\r\n  const unitsPerBox = Math.max(1, n2(item.units_per_box));\r\n  const totalQty = computeTotalQty(item.uom, item.box_qty, unitsPerBox);\r\n\r\n  const unitVat = round2(n2(item.unitExcl) * VAT_RATE);\r\n  const unitIncl = round2(n2(item.unitExcl) + unitVat);\r\n  const lineTotal = round2(unitIncl * totalQty);\r\n\r\n  return {\r\n    ...item,\r\n    units_per_box: unitsPerBox,\r\n    total_qty: totalQty,\r\n    unitVat,\r\n    unitIncl,\r\n    lineTotal,\r\n  };\r\n}\r\n\r\nfunction money(n: number) {\r\n  return n.toLocaleString(\"en-US\", { minimumFractionDigits: 2, maximumFractionDigits: 2 });\r\n}\r\n\r\nfunction fmtDateTime(d: Date) {\r\n  const pad = (x: number) => String(x).padStart(2, \"0\");\r\n  return `${pad(d.getDate())}/${pad(d.getMonth() + 1)}/${d.getFullYear()}, ${pad(d.getHours())}:${pad(d.getMinutes())}:${pad(\r\n    d.getSeconds()\r\n  )}`;\r\n}\r\n\r\nfunction blankRow(id: number): CNItem {\r\n  return recalc({\r\n    id,\r\n    productId: \"\",\r\n    sku: \"\",\r\n    description: \"\",\r\n    uom: \"BOX\",       // ‚úÖ default BOX\r\n    box_qty: 0,\r\n    units_per_box: 1,\r\n    total_qty: 0,\r\n    unitExcl: 0,\r\n    unitVat: 0,\r\n    unitIncl: 0,\r\n    lineTotal: 0,\r\n  });\r\n}\r\n\r\n\r\nexport default function CreditNoteNewClient() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n\r\n  // toast\r\n  const [toast, setToast] = useState<string | null>(null);\r\n  function showToast(msg: string) {\r\n    setToast(msg);\r\n    window.setTimeout(() => setToast(null), 2400);\r\n  }\r\n\r\n  const [lastSync, setLastSync] = useState<string>(\"‚Äî\");\r\n  const [dark, setDark] = useState(false);\r\n  const [mobileNavOpen, setMobileNavOpen] = useState(false);\r\n\r\n  const [customers, setCustomers] = useState<Customer[]>([]);\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const [loadingLists, setLoadingLists] = useState(true);\r\n\r\n  const [customerId, setCustomerId] = useState(\"\");\r\n  const [creditNoteDate, setCreditNoteDate] = useState(new Date().toISOString().slice(0, 10));\r\n  const [invoiceId, setInvoiceId] = useState(\"\");\r\n  const [reason, setReason] = useState(\"\");\r\n\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  const [items, setItems] = useState<CNItem[]>([blankRow(1)]);\r\n\r\n  // refs for fast data entry\r\n  const customerRef = useRef<HTMLSelectElement | null>(null);\r\n  const reasonRef = useRef<HTMLInputElement | null>(null);\r\n\r\n  useEffect(() => {\r\n    const saved = typeof window !== \"undefined\" ? localStorage.getItem(\"rp_theme\") : null;\r\n    const isDark = saved === \"dark\";\r\n    setDark(isDark);\r\n    document.documentElement.setAttribute(\"data-theme\", isDark ? \"dark\" : \"light\");\r\n    setLastSync(fmtDateTime(new Date()));\r\n  }, []);\r\n\r\n  function toggleTheme() {\r\n    const next = !dark;\r\n    setDark(next);\r\n    document.documentElement.setAttribute(\"data-theme\", next ? \"dark\" : \"light\");\r\n    localStorage.setItem(\"rp_theme\", next ? \"dark\" : \"light\");\r\n  }\r\n\r\n  // lock scroll when drawer open\r\n  useEffect(() => {\r\n    if (typeof document === \"undefined\") return;\r\n    document.body.style.overflow = mobileNavOpen ? \"hidden\" : \"\";\r\n    return () => {\r\n      document.body.style.overflow = \"\";\r\n    };\r\n  }, [mobileNavOpen]);\r\n\r\n  // ESC closes drawer; Ctrl/‚åò + Enter saves\r\n  useEffect(() => {\r\n    function onKeyDown(e: KeyboardEvent) {\r\n      if (e.key === \"Escape\") {\r\n        if (mobileNavOpen) setMobileNavOpen(false);\r\n        return;\r\n      }\r\n      if (e.key === \"Enter\" && (e.metaKey || e.ctrlKey)) {\r\n        e.preventDefault();\r\n        void save();\r\n      }\r\n    }\r\n    window.addEventListener(\"keydown\", onKeyDown);\r\n    return () => window.removeEventListener(\"keydown\", onKeyDown);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [mobileNavOpen, items, customerId, creditNoteDate, invoiceId, reason]);\r\n\r\n  // load customers/products\r\n  useEffect(() => {\r\n    async function load() {\r\n      setLoadingLists(true);\r\n      try {\r\n        const { data: c } = await supabase.from(\"customers\").select(\"id, name, customer_code\").order(\"name\");\r\n        setCustomers((c ?? []) as Customer[]);\r\n\r\n        // ‚úÖ include units_per_box if it exists; if not, supabase just ignores it\r\n        const { data: p } = await supabase\r\n          .from(\"products\")\r\n          .select(\"id, sku, name, selling_price, units_per_box, unit_per_box\")\r\n          .order(\"sku\");\r\n\r\n        setProducts((p ?? []) as Product[]);\r\n      } finally {\r\n        setLoadingLists(false);\r\n        setLastSync(fmtDateTime(new Date()));\r\n        window.setTimeout(() => customerRef.current?.focus(), 120);\r\n      }\r\n    }\r\n    load();\r\n  }, []);\r\n\r\n  // prefill from invoice link\r\n  useEffect(() => {\r\n    const cId = searchParams.get(\"customerId\");\r\n    const invId = searchParams.get(\"invoiceId\");\r\n    if (cId && /^\\d+$/.test(cId)) setCustomerId(cId);\r\n    if (invId && /^\\d+$/.test(invId)) setInvoiceId(invId);\r\n  }, [searchParams]);\r\n\r\n  const selectedCustomer = useMemo(() => {\r\n    const id = Number(customerId);\r\n    if (!id) return null;\r\n    return customers.find((c) => c.id === id) || null;\r\n  }, [customerId, customers]);\r\n\r\n  const totals = useMemo(() => {\r\n    const subtotalEx = items.reduce((s, r) => s + n2(r.total_qty) * n2(r.unitExcl), 0);\r\n    const vat = subtotalEx * VAT_RATE;\r\n    const total = subtotalEx + vat;\r\n\r\n    return {\r\n      subtotal: round2(subtotalEx),\r\n      vat: round2(vat),\r\n      total: round2(total),\r\n    };\r\n  }, [items]);\r\n\r\n  const setItem = (id: number, patch: Partial<CNItem>) => {\r\n    setItems((prev) => prev.map((r) => (r.id === id ? recalc({ ...r, ...patch } as CNItem) : r)));\r\n  };\r\n\r\n  const handleSelectProduct = (id: number, productId: string) => {\r\n    const p = products.find((x) => x.id === Number(productId));\r\n\r\n    const unitsPerBox =\r\n      Math.max(1, n2((p as any)?.units_per_box ?? (p as any)?.unit_per_box ?? 1));\r\n\r\n    // ‚úÖ Keep current qty if already typed, else default to 1\r\n    const current = items.find((x) => x.id === id);\r\n    const nextBoxQty = current?.box_qty ? n2(current.box_qty) : 1;\r\n\r\n    setItem(id, {\r\n        productId,\r\n        sku: p?.sku || \"\",\r\n        description: p?.name || \"\",\r\n        unitExcl: n2(p?.selling_price || 0),\r\n        units_per_box: unitsPerBox,\r\n        box_qty: nextBoxQty,\r\n\r\n     // ‚úÖ default to BOX only on first select (so it doesn't override user choice later)\r\n      uom: current?.productId ? current.uom : \"BOX\",\r\n   });\r\n\r\n\r\n    // ‚úÖ auto-add next row if this was last row (invoice behavior)\r\n    setItems((prev) => {\r\n      const idx = prev.findIndex((x) => x.id === id);\r\n      const isLast = idx === prev.length - 1;\r\n      if (!isLast) return prev;\r\n      return [...prev, blankRow(prev.length + 1)];\r\n    });\r\n  };\r\n\r\n  const addRow = () => {\r\n    setItems((prev) => [...prev, blankRow(prev.length + 1)]);\r\n  };\r\n\r\n  const removeRow = (id: number) => {\r\n    setItems((prev) => prev.filter((r) => r.id !== id));\r\n  };\r\n\r\n  const save = async () => {\r\n    if (saving) return;\r\n\r\n    if (!customerId) {\r\n      showToast(\"Select a customer first ‚ö†Ô∏è\");\r\n      customerRef.current?.focus();\r\n      return;\r\n    }\r\n\r\n    const clean = items.filter((r) => r.productId && n2(r.total_qty) > 0);\r\n    if (!clean.length) {\r\n      showToast(\"Add at least 1 item with qty > 0 ‚ö†Ô∏è\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setSaving(true);\r\n\r\n      const res = await fetch(\"/api/credit-notes/create\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          customerId: Number(customerId),\r\n          creditNoteDate,\r\n          invoiceId: invoiceId ? Number(invoiceId) : null,\r\n          reason: reason || null,\r\n\r\n          // ‚úÖ snapshot totals\r\n          subtotal: totals.subtotal,\r\n          vatAmount: totals.vat,\r\n          totalAmount: totals.total,\r\n\r\n          items: clean.map((r) => ({\r\n            product_id: Number(r.productId),\r\n\r\n            // ‚úÖ invoice-like qty logic\r\n            total_qty: n2(r.total_qty),\r\n\r\n            unit_price_excl_vat: n2(r.unitExcl),\r\n            unit_vat: n2(r.unitVat),\r\n            unit_price_incl_vat: n2(r.unitIncl),\r\n            line_total: n2(r.lineTotal),\r\n\r\n            // optional: if your API supports it you can store uom + box_qty + units_per_box\r\n            // uom: r.uom,\r\n            // box_qty: r.box_qty,\r\n            // units_per_box: r.units_per_box,\r\n          })),\r\n        }),\r\n      });\r\n\r\n      const json = await res.json();\r\n      if (!res.ok || !json.ok) throw new Error(json.error || \"Failed to create credit note\");\r\n\r\n      showToast(\"Credit note created ‚úÖ\");\r\n      window.setTimeout(() => {\r\n        router.push(`/credit-notes/${json.creditNoteId}`);\r\n      }, 650);\r\n    } catch (e: any) {\r\n      showToast(e?.message || \"Failed to create credit note\");\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  // premium UI helpers\r\n  const red = \"#e30613\";\r\n\r\n  const inputCls =\r\n    \"w-full h-[42px] rounded-2xl border border-[rgba(148,163,184,.35)] bg-[rgba(255,255,255,.92)] px-3 font-extrabold outline-none\";\r\n  const labelCls = \"text-[12px] font-black tracking-wide text-[rgba(17,24,39,.85)]\";\r\n\r\n  // ‚úÖ invoice-like split input for UOM + Qty\r\n  const uomSelectCls =\r\n    \"h-[42px] rounded-2xl border border-[rgba(148,163,184,.35)] bg-[rgba(255,255,255,.92)] px-3 font-extrabold outline-none\";\r\n  const qtyInputCls =\r\n    \"h-[42px] rounded-2xl border border-[rgba(148,163,184,.35)] bg-[rgba(255,255,255,.92)] px-3 font-extrabold outline-none text-right\";\r\n\r\n  return (\r\n    <div className=\"rp-app\">\r\n      <div className=\"rp-bg\" aria-hidden=\"true\">\r\n        <span className=\"rp-bg-orb rp-bg-orb--1\" />\r\n        <span className=\"rp-bg-orb rp-bg-orb--2\" />\r\n        <span className=\"rp-bg-orb rp-bg-orb--3\" />\r\n        <span className=\"rp-bg-grid\" />\r\n      </div>\r\n\r\n      {toast && (\r\n        <div\r\n          style={{\r\n            position: \"fixed\",\r\n            right: 18,\r\n            top: 16,\r\n            zIndex: 9999,\r\n            padding: \"10px 14px\",\r\n            borderRadius: 14,\r\n            background: \"rgba(255,255,255,.92)\",\r\n            border: \"1px solid rgba(0,0,0,.12)\",\r\n            boxShadow: \"0 16px 50px rgba(0,0,0,.18)\",\r\n            fontWeight: 950,\r\n            backdropFilter: \"blur(10px)\",\r\n            maxWidth: 520,\r\n          }}\r\n        >\r\n          {toast}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"rp-shell rp-enter\">\r\n        {/* Mobile top bar */}\r\n        <div className=\"rp-mtop\">\r\n          <button type=\"button\" className=\"rp-icon-btn\" aria-label=\"Open menu\" onClick={() => setMobileNavOpen(true)}>\r\n            <span className=\"rp-burger\" aria-hidden=\"true\">\r\n              <i />\r\n              <i />\r\n              <i />\r\n            </span>\r\n          </button>\r\n\r\n          <div className=\"rp-mtop-brand\">\r\n            <div className=\"rp-mtop-title\">New Credit Note</div>\r\n            <div className=\"rp-mtop-sub\">Ctrl/‚åò + Enter = Save</div>\r\n          </div>\r\n\r\n          <button type=\"button\" className=\"rp-icon-btn\" onClick={toggleTheme} aria-label=\"Toggle theme\">\r\n            {dark ? \"‚òÄÔ∏è\" : \"üåô\"}\r\n          </button>\r\n        </div>\r\n\r\n        <button\r\n          type=\"button\"\r\n          className={`rp-overlay ${mobileNavOpen ? \"is-open\" : \"\"}`}\r\n          aria-label=\"Close menu\"\r\n          onClick={() => setMobileNavOpen(false)}\r\n        />\r\n\r\n        {/* Drawer */}\r\n        <aside className={`rp-drawer ${mobileNavOpen ? \"is-open\" : \"\"}`} aria-label=\"Mobile navigation\">\r\n          <div className=\"rp-drawer-head\">\r\n            <div className=\"rp-drawer-brand\">\r\n              <div className=\"rp-drawer-logo\">\r\n                <Image src=\"/images/logo/logo.png\" alt=\"Ram Pottery Ltd\" width={40} height={40} priority />\r\n              </div>\r\n              <div>\r\n                <div className=\"rp-drawer-title\">Ram Pottery Ltd</div>\r\n                <div className=\"rp-drawer-sub\">Accounting & Stock</div>\r\n              </div>\r\n            </div>\r\n\r\n            <button type=\"button\" className=\"rp-icon-btn\" onClick={() => setMobileNavOpen(false)} aria-label=\"Close menu\">\r\n              ‚úï\r\n            </button>\r\n          </div>\r\n\r\n          <nav className=\"rp-nav\" onClick={() => setMobileNavOpen(false)}>\r\n            <Link className=\"rp-nav-btn\" href=\"/\">Dashboard</Link>\r\n            <Link className=\"rp-nav-btn\" href=\"/invoices\">Invoices</Link>\r\n            <Link className=\"rp-nav-btn rp-nav-btn--active\" href=\"/credit-notes\">Credit Notes</Link>\r\n            <Link className=\"rp-nav-btn\" href=\"/products\">Stock & Categories</Link>\r\n            <Link className=\"rp-nav-btn\" href=\"/customers\">Customers</Link>\r\n            <Link className=\"rp-nav-btn\" href=\"/reports\">Reports & Statements</Link>\r\n            <Link className=\"rp-nav-btn\" href=\"/admin/users\">Users & Permissions</Link>\r\n          </nav>\r\n        </aside>\r\n\r\n        {/* Desktop sidebar */}\r\n        <aside className=\"rp-side\">\r\n          <div className=\"rp-side-card rp-card-anim\">\r\n            <div className=\"rp-brand\">\r\n              <div className=\"rp-brand-logo\">\r\n                <Image src=\"/images/logo/logo.png\" alt=\"Ram Pottery Ltd\" width={44} height={44} priority />\r\n              </div>\r\n              <div className=\"rp-brand-text\">\r\n                <div className=\"rp-brand-title\">Ram Pottery Ltd</div>\r\n                <div className=\"rp-brand-sub\">Online Accounting & Stock Manager</div>\r\n              </div>\r\n            </div>\r\n\r\n            <nav className=\"rp-nav\">\r\n              <Link className=\"rp-nav-btn\" href=\"/\">Dashboard</Link>\r\n              <Link className=\"rp-nav-btn\" href=\"/invoices\">Invoices</Link>\r\n              <Link className=\"rp-nav-btn rp-nav-btn--active\" href=\"/credit-notes\">Credit Notes</Link>\r\n              <Link className=\"rp-nav-btn\" href=\"/products\">Stock & Categories</Link>\r\n              <Link className=\"rp-nav-btn\" href=\"/stock-movements\">Stock Movements</Link>\r\n              <Link className=\"rp-nav-btn\" href=\"/customers\">Customers</Link>\r\n              <Link className=\"rp-nav-btn\" href=\"/suppliers\">Suppliers</Link>\r\n              <Link className=\"rp-nav-btn\" href=\"/reports\">Reports & Statements</Link>\r\n              <Link className=\"rp-nav-btn\" href=\"/admin/users\">Users & Permissions</Link>\r\n            </nav>\r\n\r\n            <div className=\"rp-side-footer\">\r\n              <div className=\"rp-role\">\r\n                <span>Doc</span>\r\n                <b>Credit Note</b>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </aside>\r\n\r\n        {/* Main */}\r\n        <main className=\"rp-main\">\r\n          {/* Premium top header like invoices */}\r\n          <header className=\"rp-top rp-top--saas rp-card-anim\" style={{ animationDelay: \"60ms\" }}>\r\n            <div className=\"rp-top-left--actions\">\r\n              <button type=\"button\" className=\"rp-ui-btn rp-ui-btn--brand\" onClick={toggleTheme}>\r\n                <span className=\"rp-ui-btn__dot\" aria-hidden=\"true\" />\r\n                {dark ? \"‚òÄ Light\" : \"üåô Dark\"}\r\n              </button>\r\n\r\n              <button type=\"button\" className=\"rp-ui-btn\" onClick={() => router.push(\"/credit-notes\")}>\r\n                <span className=\"rp-ui-btn__dot\" aria-hidden=\"true\" />\r\n                Back\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"rp-top-center--logo\">\r\n              <div className=\"rp-top-logo\">\r\n                <Image src=\"/images/logo/logo.png\" alt=\"Ram Pottery\" width={44} height={44} priority />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"rp-top-right--sync\">\r\n              <div className=\"rp-sync\">\r\n                <div className=\"rp-sync-label\">Last sync :</div>\r\n                <div className=\"rp-sync-time\">{lastSync}</div>\r\n              </div>\r\n            </div>\r\n          </header>\r\n\r\n          <section className=\"rp-exec rp-card-anim\">\r\n            <div className=\"rp-exec__left\">\r\n              <div className=\"rp-exec__title\">New Credit Note</div>\r\n              <div className=\"rp-exec__sub\">Invoice-style BOX/PCS ‚Ä¢ Unit/Box auto ‚Ä¢ Total Qty auto ‚Ä¢ VAT 15%</div>\r\n            </div>\r\n            <div className=\"rp-exec__right\">\r\n              <span className={`rp-live ${saving ? \"is-dim\" : \"\"}`}>\r\n                <span className=\"rp-live-dot\" aria-hidden=\"true\" />\r\n                {saving ? \"Saving\" : \"Live\"}\r\n              </span>\r\n              <span className=\"rp-chip rp-chip--soft\">Reprint-ready</span>\r\n            </div>\r\n          </section>\r\n\r\n          {/* Document Card */}\r\n          <section className=\"rp-card rp-card-anim\" style={{ animationDelay: \"140ms\" }}>\r\n            <div className=\"rp-card-body\" style={{ padding: 16 }}>\r\n              <div\r\n                style={{\r\n                  background: \"#fff\",\r\n                  borderRadius: 18,\r\n                  border: \"1px solid rgba(148,163,184,.35)\",\r\n                  boxShadow: \"0 25px 80px rgba(0,0,0,.10)\",\r\n                  overflow: \"hidden\",\r\n                }}\r\n              >\r\n                {/* Paper header */}\r\n                <div style={{ padding: 16, borderBottom: \"1px solid rgba(148,163,184,.22)\" }}>\r\n                  <div style={{ display: \"grid\", gridTemplateColumns: \"120px 1fr\", gap: 14, alignItems: \"center\" }}>\r\n                    <div style={{ display: \"flex\", justifyContent: \"center\" }}>\r\n                      <Image src=\"/images/logo/logo.png\" alt=\"Ram Pottery\" width={96} height={96} priority />\r\n                    </div>\r\n\r\n                    <div style={{ textAlign: \"center\" }}>\r\n                      <div style={{ fontSize: 32, fontWeight: 1000, letterSpacing: \".06em\", color: red }}>\r\n                        {COMPANY.name}\r\n                      </div>\r\n                      <div style={{ fontSize: 12, fontWeight: 900, opacity: 0.82 }}>{COMPANY.tagline1}</div>\r\n                      <div style={{ fontSize: 12, fontWeight: 900, opacity: 0.82 }}>{COMPANY.tagline2}</div>\r\n\r\n                      <div style={{ marginTop: 8, fontSize: 13, fontWeight: 850 }}>{COMPANY.address}</div>\r\n                      <div style={{ marginTop: 6, fontSize: 12, fontWeight: 850 }}>\r\n                        <span style={{ color: red, fontWeight: 1000 }}>Tel:</span> {COMPANY.tel1} ‚Ä¢ {COMPANY.tel2} ‚Ä¢ {COMPANY.tel3}\r\n                      </div>\r\n                      <div style={{ marginTop: 4, fontSize: 12, fontWeight: 850 }}>\r\n                        <span style={{ color: red, fontWeight: 1000 }}>Email:</span> {COMPANY.email} ‚Ä¢{\" \"}\r\n                        <span style={{ color: red, fontWeight: 1000 }}>Web:</span> {COMPANY.web}\r\n                      </div>\r\n\r\n                      <div style={{ marginTop: 10, fontSize: 14, fontWeight: 1000, color: red, letterSpacing: \".14em\" }}>\r\n                        CREDIT NOTE\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Form grid */}\r\n                <div style={{ padding: 16 }}>\r\n                  <div style={{ display: \"grid\", gridTemplateColumns: \"1fr 1fr\", gap: 14 }}>\r\n                    {/* Customer */}\r\n                    <div className=\"rp-card\" style={{ margin: 0 }}>\r\n                      <div className=\"rp-card-head rp-card-head--tight\">\r\n                        <div>\r\n                          <div className=\"rp-card-title\">Customer</div>\r\n                          <div className=\"rp-card-sub\">Auto-fill from customer list</div>\r\n                        </div>\r\n                        <span className=\"rp-chip rp-chip--soft\">{loadingLists ? \"Loading‚Ä¶\" : \"Ready\"}</span>\r\n                      </div>\r\n\r\n                      <div className=\"rp-card-body\" style={{ paddingTop: 10 }}>\r\n                        <div style={{ display: \"grid\", gap: 10 }}>\r\n                          <label>\r\n                            <div className={labelCls}>Customer *</div>\r\n                            <select\r\n                              ref={customerRef}\r\n                              className={inputCls}\r\n                              value={customerId}\r\n                              onChange={(e) => setCustomerId(e.target.value)}\r\n                            >\r\n                              <option value=\"\">Select customer</option>\r\n                              {customers.map((c) => (\r\n                                <option key={c.id} value={c.id}>\r\n                                  {c.customer_code ? `${c.customer_code} ‚Äî ` : \"\"}\r\n                                  {c.name}\r\n                                </option>\r\n                              ))}\r\n                            </select>\r\n                          </label>\r\n\r\n                          <div style={{ display: \"grid\", gridTemplateColumns: \"1fr 1fr\", gap: 10 }}>\r\n                            <div>\r\n                              <div className={labelCls}>Customer Code</div>\r\n                              <div style={{ fontWeight: 1000, paddingTop: 6 }}>{selectedCustomer?.customer_code || \"‚Äî\"}</div>\r\n                            </div>\r\n                            <div>\r\n                              <div className={labelCls}>Name</div>\r\n                              <div style={{ fontWeight: 1000, paddingTop: 6 }}>{selectedCustomer?.name || \"‚Äî\"}</div>\r\n                            </div>\r\n                          </div>\r\n\r\n                          <label>\r\n                            <div className={labelCls}>Reason</div>\r\n                            <input\r\n                              ref={reasonRef}\r\n                              className={inputCls}\r\n                              value={reason}\r\n                              onChange={(e) => setReason(e.target.value)}\r\n                              placeholder=\"Returned goods / Damaged / Price adjustment‚Ä¶\"\r\n                            />\r\n                          </label>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Meta */}\r\n                    <div className=\"rp-card\" style={{ margin: 0 }}>\r\n                      <div className=\"rp-card-head rp-card-head--tight\">\r\n                        <div>\r\n                          <div className=\"rp-card-title\">Document</div>\r\n                          <div className=\"rp-card-sub\">BRN ‚Ä¢ VAT ‚Ä¢ reference</div>\r\n                        </div>\r\n                        <span className=\"rp-chip\">VAT 15%</span>\r\n                      </div>\r\n\r\n                      <div className=\"rp-card-body\" style={{ paddingTop: 10 }}>\r\n                        <div style={{ display: \"grid\", gap: 10 }}>\r\n                          <div style={{ display: \"grid\", gridTemplateColumns: \"1fr 1fr\", gap: 10 }}>\r\n                            <div>\r\n                              <div className={labelCls}>Date *</div>\r\n                              <input type=\"date\" className={inputCls} value={creditNoteDate} onChange={(e) => setCreditNoteDate(e.target.value)} />\r\n                            </div>\r\n                            <div>\r\n                              <div className={labelCls}>Credit Note No</div>\r\n                              <div style={{ fontWeight: 1000, paddingTop: 10 }}>AUTO</div>\r\n                            </div>\r\n                          </div>\r\n\r\n                          <label>\r\n                            <div className={labelCls}>Related Invoice ID (optional)</div>\r\n                            <input className={inputCls} value={invoiceId} onChange={(e) => setInvoiceId(e.target.value)} placeholder=\"e.g. 123\" />\r\n                          </label>\r\n\r\n                          <div style={{ display: \"flex\", gap: 10, flexWrap: \"wrap\" }}>\r\n                            <span className=\"rp-chip rp-chip--soft\">BRN: {COMPANY.brn}</span>\r\n                            <span className=\"rp-chip rp-chip--soft\">{COMPANY.vat}</span>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {/* Items */}\r\n                  <div className=\"rp-card\" style={{ marginTop: 14 }}>\r\n                    <div className=\"rp-card-head rp-card-head--tight\">\r\n                      <div>\r\n                        <div className=\"rp-card-title\">Items</div>\r\n                        <div className=\"rp-card-sub\">Invoice-style: BOX/PCS + Qty ‚Üí Unit/Box + Total Qty auto</div>\r\n                      </div>\r\n\r\n                      <div style={{ display: \"flex\", gap: 10, flexWrap: \"wrap\" }}>\r\n                        <button type=\"button\" className=\"rp-ui-btn\" onClick={addRow}>\r\n                          <span className=\"rp-ui-btn__dot\" aria-hidden=\"true\" />\r\n                          Add row\r\n                        </button>\r\n\r\n                        <button\r\n                          type=\"button\"\r\n                          className=\"rp-ui-btn rp-ui-btn--brand\"\r\n                          onClick={() => void save()}\r\n                          disabled={saving}\r\n                          title=\"Ctrl/‚åò + Enter\"\r\n                        >\r\n                          <span className=\"rp-ui-btn__dot\" aria-hidden=\"true\" />\r\n                          {saving ? \"Saving‚Ä¶\" : \"Save Credit Note\"}\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"rp-card-body\">\r\n                      <div className=\"rp-table-scroll\">\r\n                        <div className=\"rp-table-scroll__inner\">\r\n                          <table className=\"rp-table rp-table--premium\">\r\n                            <thead>\r\n                              <tr>\r\n                                <th style={{ width: 70 }}>SN</th>\r\n                                <th style={{ minWidth: 280 }}>Product</th>\r\n\r\n                                {/* ‚úÖ invoice-like UOM+Qty */}\r\n                                <th style={{ width: 220 }}>BOX / PCS</th>\r\n\r\n                                {/* ‚úÖ unit/box */}\r\n                                <th className=\"rp-right\" style={{ width: 140 }}>Unit/Box</th>\r\n\r\n                                {/* ‚úÖ total qty */}\r\n                                <th className=\"rp-right\" style={{ width: 140 }}>Total Qty</th>\r\n\r\n                                <th style={{ minWidth: 280 }}>Description</th>\r\n\r\n                                <th className=\"rp-right rp-col-hide-sm\" style={{ width: 150 }}>Unit Ex</th>\r\n                                <th className=\"rp-right rp-col-hide-sm\" style={{ width: 120 }}>VAT</th>\r\n                                <th className=\"rp-right rp-col-hide-sm\" style={{ width: 150 }}>Unit Incl</th>\r\n                                <th className=\"rp-right\" style={{ width: 170 }}>Total</th>\r\n\r\n                                <th style={{ width: 90 }} />\r\n                              </tr>\r\n                            </thead>\r\n\r\n                            <tbody>\r\n                              {items.map((r, i) => (\r\n                                <tr key={r.id} className=\"rp-row-hover\">\r\n                                  <td className=\"rp-strong\" style={{ textAlign: \"center\" }}>\r\n                                    {i + 1}\r\n                                  </td>\r\n\r\n                                  <td>\r\n                                    <select\r\n                                      className={inputCls}\r\n                                      value={r.productId}\r\n                                      onChange={(e) => handleSelectProduct(r.id, e.target.value)}\r\n                                    >\r\n                                      <option value=\"\">Select product</option>\r\n                                      {products.map((p) => (\r\n                                        <option key={p.id} value={p.id}>\r\n                                          {p.sku} ‚Äî {p.name}\r\n                                        </option>\r\n                                      ))}\r\n                                    </select>\r\n\r\n                                    <div className=\"rp-muted\" style={{ marginTop: 6, fontWeight: 900 }}>\r\n                                      SKU: <b style={{ fontWeight: 1000 }}>{r.sku || \"‚Äî\"}</b>\r\n                                    </div>\r\n                                  </td>\r\n\r\n                                  {/* ‚úÖ UOM + Qty */}\r\n                                  <td>\r\n                                    <div style={{ display: \"grid\", gridTemplateColumns: \"110px 1fr\", gap: 8 }}>\r\n                                      <select\r\n                                        className={uomSelectCls}\r\n                                        value={r.uom}\r\n                                        onChange={(e) => setItem(r.id, { uom: e.target.value as UOM })}\r\n                                      >\r\n                                        <option value=\"BOX\">BOX</option>\r\n                                        <option value=\"PCS\">PCS</option>\r\n                                      </select>\r\n\r\n                                      <input\r\n                                        className={qtyInputCls}\r\n                                        inputMode=\"numeric\"\r\n                                        value={r.box_qty}\r\n                                        onChange={(e) => setItem(r.id, { box_qty: n2(e.target.value) })}\r\n                                      />\r\n                                    </div>\r\n                                  </td>\r\n\r\n                                  {/* ‚úÖ Unit/Box */}\r\n                                  <td className=\"rp-right rp-strong\" style={{ fontVariantNumeric: \"tabular-nums\" }}>\r\n                                    {r.uom === \"BOX\" ? r.units_per_box : \"‚Äî\"}\r\n                                  </td>\r\n\r\n                                  {/* ‚úÖ Total Qty */}\r\n                                  <td className=\"rp-right rp-strong\" style={{ fontVariantNumeric: \"tabular-nums\" }}>\r\n                                    {r.total_qty}\r\n                                  </td>\r\n\r\n                                  {/* ‚úÖ Description auto */}\r\n                                  <td style={{ fontWeight: 850 }}>{r.description || \"‚Äî\"}</td>\r\n\r\n                                  {/* ‚úÖ Unit Ex */}\r\n                                  <td className=\"rp-right rp-col-hide-sm\">\r\n                                    <input\r\n                                      className={qtyInputCls}\r\n                                      inputMode=\"decimal\"\r\n                                      value={r.unitExcl}\r\n                                      onChange={(e) => setItem(r.id, { unitExcl: n2(e.target.value) })}\r\n                                    />\r\n                                  </td>\r\n\r\n                                  <td className=\"rp-right rp-col-hide-sm rp-strong\">{money(r.unitVat)}</td>\r\n                                  <td className=\"rp-right rp-col-hide-sm rp-strong\">{money(r.unitIncl)}</td>\r\n\r\n                                  <td className=\"rp-right rp-strong\">{money(r.lineTotal)}</td>\r\n\r\n                                  <td style={{ textAlign: \"right\" }}>\r\n                                    {items.length > 1 && (\r\n                                      <button type=\"button\" className=\"rp-chip\" onClick={() => removeRow(r.id)}>\r\n                                        Remove\r\n                                      </button>\r\n                                    )}\r\n                                  </td>\r\n                                </tr>\r\n                              ))}\r\n                            </tbody>\r\n                          </table>\r\n                        </div>\r\n                      </div>\r\n\r\n                      {/* Totals bar */}\r\n                      <div style={{ marginTop: 12, display: \"grid\", gridTemplateColumns: \"1fr 340px\", gap: 12, alignItems: \"start\" }}>\r\n                        <div className=\"rp-muted\" style={{ fontWeight: 900 }}>\r\n                          Tip: Select product ‚Üí Unit Ex fills. Choose BOX/PCS ‚Üí Total Qty updates instantly.\r\n                        </div>\r\n\r\n                        <div className=\"rp-card\" style={{ margin: 0 }}>\r\n                          <div className=\"rp-card-body\">\r\n                            <div style={{ display: \"grid\", gap: 8 }}>\r\n                              <div style={{ display: \"flex\", justifyContent: \"space-between\", fontWeight: 950 }}>\r\n                                <span>SUBTOTAL</span>\r\n                                <span>{money(totals.subtotal)}</span>\r\n                              </div>\r\n                              <div style={{ display: \"flex\", justifyContent: \"space-between\", fontWeight: 950 }}>\r\n                                <span>VAT (15%)</span>\r\n                                <span>{money(totals.vat)}</span>\r\n                              </div>\r\n                              <div style={{ height: 1, background: \"rgba(148,163,184,.35)\" }} />\r\n                              <div style={{ display: \"flex\", justifyContent: \"space-between\", fontWeight: 1000, fontSize: 16 }}>\r\n                                <span>TOTAL</span>\r\n                                <span>{money(totals.total)}</span>\r\n                              </div>\r\n\r\n                              <button\r\n                                type=\"button\"\r\n                                onClick={() => void save()}\r\n                                disabled={saving}\r\n                                style={{\r\n                                  marginTop: 8,\r\n                                  borderRadius: 14,\r\n                                  border: \"none\",\r\n                                  background: `linear-gradient(135deg, ${red}, #b4000b)`,\r\n                                  color: \"white\",\r\n                                  fontWeight: 1000,\r\n                                  letterSpacing: \".02em\",\r\n                                  boxShadow: \"0 18px 50px rgba(227,6,19,.25)\",\r\n                                  padding: \"12px 14px\",\r\n                                  cursor: saving ? \"not-allowed\" : \"pointer\",\r\n                                  opacity: saving ? 0.75 : 1,\r\n                                }}\r\n                                title=\"Ctrl/‚åò + Enter\"\r\n                              >\r\n                                {saving ? \"Saving‚Ä¶\" : \"Save Credit Note\"}\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div\r\n                        style={{\r\n                          marginTop: 14,\r\n                          background: red,\r\n                          color: \"white\",\r\n                          padding: \"10px 12px\",\r\n                          borderRadius: 12,\r\n                          fontWeight: 900,\r\n                          textAlign: \"center\",\r\n                          letterSpacing: \".03em\",\r\n                        }}\r\n                      >\r\n                        We thank you for your business and look forward to being of service to you again.\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          <footer className=\"rp-footer rp-card-anim\" style={{ animationDelay: \"260ms\" }}>\r\n            ¬© {new Date().getFullYear()} Ram Pottery Ltd ‚Ä¢ Built by <span>MoBiz.mu</span>\r\n          </footer>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}