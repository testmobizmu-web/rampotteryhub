{"version":3,"sources":["../../../../app/customers/page.tsx"],"sourcesContent":["// app/customers/page.tsx\r\n\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport Image from \"next/image\";\r\nimport { useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { rpFetch } from \"@/lib/rpFetch\";\r\n\r\ntype Customer = {\r\n  id: number | string;\r\n  customer_code?: string | null;\r\n  name?: string | null; // customer_name\r\n  client?: string | null; // client_name\r\n  address?: string | null;\r\n  phone?: string | null; // phone_no\r\n  whatsapp?: string | null; // whatsapp_no\r\n  brn?: string | null;\r\n  vat_no?: string | null;\r\n  discount_percent?: number | null;\r\n  is_active?: boolean | null;\r\n  created_at?: string | null;\r\n};\r\n\r\ntype RpSession = {\r\n  id?: string;\r\n  username?: string;\r\n  name?: string;\r\n  role?: string;\r\n};\r\n\r\nfunction safeStr(v: unknown) {\r\n  return String(v ?? \"\").trim();\r\n}\r\n\r\nfunction n0(v: any) {\r\n  const x = Number(v);\r\n  return Number.isFinite(x) ? x : 0;\r\n}\r\n\r\nfunction fmtPct(v: any) {\r\n  const num = Math.min(Math.max(n0(v), 0), 100);\r\n  return `${num}%`;\r\n}\r\n\r\nfunction roleUpper(r?: string) {\r\n  return String(r || \"\").toUpperCase();\r\n}\r\nfunction isAdmin(r?: string) {\r\n  return roleUpper(r) === \"ADMIN\";\r\n}\r\nfunction isManager(r?: string) {\r\n  return roleUpper(r) === \"MANAGER\";\r\n}\r\nfunction isPrivileged(r?: string) {\r\n  return isAdmin(r) || isManager(r);\r\n}\r\n\r\nfunction fmtDateTime(d: Date) {\r\n  const pad = (x: number) => String(x).padStart(2, \"0\");\r\n  return `${pad(d.getDate())}/${pad(d.getMonth() + 1)}/${d.getFullYear()}, ${pad(d.getHours())}:${pad(\r\n    d.getMinutes()\r\n  )}:${pad(d.getSeconds())}`;\r\n}\r\n\r\nexport default function CustomersPage() {\r\n  const router = useRouter();\r\n\r\n  const [drawerOpen, setDrawerOpen] = useState(false);\r\n  const [theme, setTheme] = useState<\"light\" | \"dark\">(\"light\");\r\n  const [lastSync, setLastSync] = useState<string>(\"\");\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [err, setErr] = useState<string | null>(null);\r\n  const [customers, setCustomers] = useState<Customer[]>([]);\r\n\r\n  const [mounted, setMounted] = useState(false);\r\n  const [session, setSession] = useState<RpSession | null>(null);\r\n\r\n  const [q, setQ] = useState(\"\");\r\n  const [debouncedQ, setDebouncedQ] = useState(\"\");\r\n  const debounceRef = useRef<number | null>(null);\r\n\r\n  const [filter, setFilter] = useState<\"ALL\" | \"WITH_VAT\" | \"WITH_BRN\">(\"ALL\");\r\n  const [statusFilter, setStatusFilter] = useState<\"ACTIVE\" | \"ARCHIVED\" | \"ALL\">(\"ACTIVE\");\r\n\r\n  // ‚ãÆ menu state\r\n  const [openMenuId, setOpenMenuId] = useState<string | null>(null);\r\n  const openMenuRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  useEffect(() => {\r\n    setMounted(true);\r\n\r\n    const saved = localStorage.getItem(\"rp_theme\");\r\n    const initial = saved === \"dark\" ? \"dark\" : \"light\";\r\n    setTheme(initial);\r\n    document.documentElement.dataset.theme = initial;\r\n\r\n    try {\r\n      const raw = localStorage.getItem(\"rp_user\");\r\n      if (!raw) {\r\n        router.replace(\"/login\");\r\n        return;\r\n      }\r\n      const s = JSON.parse(raw);\r\n      setSession(s);\r\n    } catch {\r\n      router.replace(\"/login\");\r\n      return;\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    function onDown(e: MouseEvent) {\r\n      if (!openMenuId) return;\r\n      const t = e.target as Node | null;\r\n      if (openMenuRef.current && t && openMenuRef.current.contains(t)) return;\r\n      setOpenMenuId(null);\r\n    }\r\n    function onKey(e: KeyboardEvent) {\r\n      if (!openMenuId) return;\r\n      if (e.key === \"Escape\") setOpenMenuId(null);\r\n    }\r\n    document.addEventListener(\"mousedown\", onDown);\r\n    document.addEventListener(\"keydown\", onKey);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", onDown);\r\n      document.removeEventListener(\"keydown\", onKey);\r\n    };\r\n  }, [openMenuId]);\r\n\r\n  const userLabel = useMemo(() => {\r\n    const name = (session?.name || session?.username || \"\").trim();\r\n    return name ? name : \"User\";\r\n  }, [session]);\r\n\r\n  const roleLabel = useMemo(() => roleUpper(session?.role) || \"STAFF\", [session]);\r\n\r\n  const canSeeAdminNav = mounted && isAdmin(session?.role);\r\n  const canBulkImport = mounted && isPrivileged(session?.role);\r\n\r\n  const navItems = useMemo(() => {\r\n    const base = [\r\n      { href: \"/\", label: \"Dashboard\" },\r\n      { href: \"/invoices\", label: \"Invoices\" },\r\n      { href: \"/credit-notes\", label: \"Credit Notes\" },\r\n      { href: \"/stock\", label: \"Stock & Categories\" },\r\n      { href: \"/stock-movements\", label: \"Stock Movements\" },\r\n      { href: \"/customers\", label: \"Customers\" },\r\n      { href: \"/reports\", label: \"Reports & Statements\" },\r\n    ];\r\n    if (canSeeAdminNav) base.push({ href: \"/admin/users\", label: \"Users & Permissions\" });\r\n    return base;\r\n  }, [canSeeAdminNav]);\r\n\r\n  useEffect(() => {\r\n    if (debounceRef.current) window.clearTimeout(debounceRef.current);\r\n    debounceRef.current = window.setTimeout(() => setDebouncedQ(q.trim()), 220);\r\n    return () => {\r\n      if (debounceRef.current) window.clearTimeout(debounceRef.current);\r\n    };\r\n  }, [q]);\r\n\r\n  function toggleTheme() {\r\n    const next = theme === \"dark\" ? \"light\" : \"dark\";\r\n    setTheme(next);\r\n    document.documentElement.dataset.theme = next;\r\n    localStorage.setItem(\"rp_theme\", next);\r\n  }\r\n\r\n  async function handleLogout() {\r\n    try {\r\n      await fetch(\"/api/auth/logout\", { method: \"POST\" });\r\n    } finally {\r\n      localStorage.removeItem(\"rp_user\");\r\n      window.location.href = \"/login\";\r\n    }\r\n  }\r\n\r\n  async function load(nextStatus?: \"ACTIVE\" | \"ARCHIVED\" | \"ALL\") {\r\n    try {\r\n      setErr(null);\r\n      setLoading(true);\r\n\r\n      const st = nextStatus || statusFilter;\r\n      const showArchived = st === \"ARCHIVED\" || st === \"ALL\" ? \"1\" : \"0\";\r\n\r\n      const res = await rpFetch(`/api/customers/list?showArchived=${showArchived}`, { method: \"GET\", cache: \"no-store\" });\r\n      const json = await res.json().catch(() => ({}));\r\n\r\n      if (!res.ok || !json?.ok) throw new Error(json?.error || \"Failed to load customers\");\r\n\r\n      const list: Customer[] = Array.isArray(json.customers) ? json.customers : [];\r\n      setCustomers(list);\r\n      setLastSync(fmtDateTime(new Date()));\r\n    } catch (e: any) {\r\n      setErr(e?.message || \"Failed to load customers\");\r\n      setCustomers([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    load();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const filtered = useMemo(() => {\r\n    const s = debouncedQ.toLowerCase();\r\n    let list = customers;\r\n\r\n    // status filter (client-side for ALL mode)\r\n    if (statusFilter === \"ACTIVE\") list = list.filter((c) => c.is_active !== false);\r\n    if (statusFilter === \"ARCHIVED\") list = list.filter((c) => c.is_active === false);\r\n\r\n    if (filter === \"WITH_VAT\") list = list.filter((c) => safeStr(c.vat_no));\r\n    if (filter === \"WITH_BRN\") list = list.filter((c) => safeStr(c.brn));\r\n\r\n    if (!s) return list;\r\n\r\n    return list.filter((c) => {\r\n      const blob = [\r\n        c.customer_code,\r\n        c.name,\r\n        c.client,\r\n        c.address,\r\n        c.phone,\r\n        c.whatsapp,\r\n        c.brn,\r\n        c.vat_no,\r\n        String(c.discount_percent ?? \"\"),\r\n      ]\r\n        .map(safeStr)\r\n        .join(\" \")\r\n        .toLowerCase();\r\n\r\n      return blob.includes(s);\r\n    });\r\n  }, [customers, debouncedQ, filter, statusFilter]);\r\n\r\n  const kpis = useMemo(() => {\r\n    const total = filtered.length;\r\n    const withVat = filtered.filter((c) => safeStr(c.vat_no)).length;\r\n    const withBrn = filtered.filter((c) => safeStr(c.brn)).length;\r\n    const missingCode = filtered.filter((c) => !safeStr(c.customer_code)).length;\r\n    const avgDisc =\r\n      total === 0 ? 0 : Math.round((filtered.reduce((a, c) => a + n0(c.discount_percent), 0) / total) * 10) / 10;\r\n    return { total, withVat, withBrn, missingCode, avgDisc };\r\n  }, [filtered]);\r\n\r\n  function toggleRowMenu(id: string) {\r\n    setOpenMenuId((cur) => (cur === id ? null : id));\r\n  }\r\n\r\n  function goTo(path: string) {\r\n    setOpenMenuId(null);\r\n    router.push(path);\r\n  }\r\n\r\n  return (\r\n    <div className=\"rp-app\">\r\n      <div className=\"rp-bg\" aria-hidden=\"true\">\r\n        <div className=\"rp-bg-orb rp-bg-orb--1\" />\r\n        <div className=\"rp-bg-orb rp-bg-orb--2\" />\r\n        <div className=\"rp-bg-orb rp-bg-orb--3\" />\r\n        <div className=\"rp-bg-grid\" />\r\n      </div>\r\n\r\n      <div className=\"rp-shell rp-enter\">\r\n        {/* Mobile top bar */}\r\n        <div className=\"rp-mtop\">\r\n          <button type=\"button\" className=\"rp-icon-btn rp-burger\" onClick={() => setDrawerOpen(true)} aria-label=\"Open menu\">\r\n            <span aria-hidden=\"true\">\r\n              <i />\r\n              <i />\r\n              <i />\r\n            </span>\r\n          </button>\r\n\r\n          <div className=\"rp-mtop-brand\">\r\n            <div className=\"rp-mtop-title\">RampotteryHUB</div>\r\n            <div className=\"rp-mtop-sub\">Customers</div>\r\n          </div>\r\n\r\n          <button type=\"button\" className=\"rp-icon-btn\" onClick={toggleTheme} aria-label=\"Toggle theme\">\r\n            {theme === \"dark\" ? \"‚òÄ\" : \"üåô\"}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Overlay + Drawer */}\r\n        <button className={`rp-overlay ${drawerOpen ? \"is-open\" : \"\"}`} onClick={() => setDrawerOpen(false)} aria-label=\"Close menu\" />\r\n        <aside className={`rp-drawer ${drawerOpen ? \"is-open\" : \"\"}`}>\r\n          <div className=\"rp-drawer-head\">\r\n            <div className=\"rp-drawer-brand\">\r\n              <div className=\"rp-drawer-logo\">\r\n                <Image src=\"/images/logo/logo.png\" alt=\"Ram Pottery Ltd\" width={28} height={28} priority />\r\n              </div>\r\n              <div>\r\n                <div className=\"rp-drawer-title\">RampotteryHUB</div>\r\n                <div className=\"rp-drawer-sub\">Accounting & Stock System</div>\r\n              </div>\r\n            </div>\r\n\r\n            <button type=\"button\" className=\"rp-icon-btn\" onClick={() => setDrawerOpen(false)} aria-label=\"Close\">\r\n              ‚úï\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"rp-drawer-body\">\r\n            <nav className=\"rp-nav\">\r\n              {navItems.map((it) => (\r\n                <Link\r\n                  key={it.href}\r\n                  className={`rp-nav-btn ${it.href === \"/customers\" ? \"rp-nav-btn--active\" : \"\"}`}\r\n                  href={it.href}\r\n                  onClick={() => setDrawerOpen(false)}\r\n                >\r\n                  <span className=\"rp-ic3d\" aria-hidden=\"true\">\r\n                    ‚ñ∂\r\n                  </span>\r\n                  {it.label}\r\n                </Link>\r\n              ))}\r\n            </nav>\r\n\r\n            <div className=\"rp-side-footer rp-side-footer--in\">\r\n              <div className=\"rp-role\">\r\n                <span>Signed in</span>\r\n                <b title={userLabel}>{mounted ? userLabel : \"‚Äî\"}</b>\r\n              </div>\r\n              <div className=\"rp-role\" style={{ marginTop: 10 }}>\r\n                <span>Role</span>\r\n                <b>{mounted ? roleLabel : \"‚Äî\"}</b>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </aside>\r\n\r\n        {/* Desktop sidebar */}\r\n        <aside className=\"rp-side\">\r\n          <div className=\"rp-side-card rp-card-anim\">\r\n            <div className=\"rp-brand\">\r\n              <div className=\"rp-brand-logo\">\r\n                <Image src=\"/images/logo/logo.png\" alt=\"Ram Pottery Ltd\" width={30} height={30} priority />\r\n              </div>\r\n              <div>\r\n                <div className=\"rp-brand-title\">RampotteryHUB</div>\r\n                <div className=\"rp-brand-sub\">Accounting & Stock System</div>\r\n              </div>\r\n            </div>\r\n\r\n            <nav className=\"rp-nav\">\r\n              {navItems.map((it) => (\r\n                <Link key={it.href} className={`rp-nav-btn ${it.href === \"/customers\" ? \"rp-nav-btn--active\" : \"\"}`} href={it.href}>\r\n                  <span className=\"rp-ic3d\" aria-hidden=\"true\">\r\n                    ‚ñ∂\r\n                  </span>\r\n                  {it.label}\r\n                </Link>\r\n              ))}\r\n            </nav>\r\n\r\n            <div className=\"rp-side-footer rp-side-footer--in\">\r\n              <div className=\"rp-role\">\r\n                <span>Signed in</span>\r\n                <b title={userLabel}>{mounted ? userLabel : \"‚Äî\"}</b>\r\n              </div>\r\n              <div className=\"rp-role\" style={{ marginTop: 10 }}>\r\n                <span>Role</span>\r\n                <b>{mounted ? roleLabel : \"‚Äî\"}</b>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </aside>\r\n\r\n        {/* Main */}\r\n        <main className=\"rp-main\">\r\n          {/* Top bar */}\r\n          <header className=\"rp-top rp-top--saas rp-card-anim\" style={{ animationDelay: \"60ms\" }}>\r\n            <div className=\"rp-top-left--actions\">\r\n              <button type=\"button\" className=\"rp-ui-btn rp-ui-btn--brand\" onClick={toggleTheme}>\r\n                <span className=\"rp-ui-btn__dot\" aria-hidden=\"true\" />\r\n                {theme === \"dark\" ? \"‚òÄ Light\" : \"üåô Dark\"}\r\n              </button>\r\n\r\n              <button type=\"button\" className=\"rp-ui-btn rp-ui-btn--danger\" onClick={handleLogout}>\r\n                <span className=\"rp-ui-btn__dot\" aria-hidden=\"true\" />\r\n                Log Out\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"rp-top-center--logo\">\r\n              <div className=\"rp-top-logo\">\r\n                <Image src=\"/images/logo/logo.png\" alt=\"Ram Pottery\" width={44} height={44} priority />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"rp-top-right--sync\">\r\n              <div className=\"rp-sync\">\r\n                <div className=\"rp-sync-label\">Last sync :</div>\r\n                <div className=\"rp-sync-time\">{lastSync || \"‚Äî\"}</div>\r\n              </div>\r\n            </div>\r\n          </header>\r\n\r\n          {/* Executive header */}\r\n          <section className=\"rp-exec rp-card-anim\">\r\n            <div className=\"rp-exec__left\">\r\n              <div className=\"rp-exec__title\">Customers</div>\r\n              <div className=\"rp-exec__sub\">\r\n                Format: <b>Code ‚Ä¢ Customer ‚Ä¢ Client ‚Ä¢ Address ‚Ä¢ Phone ‚Ä¢ WhatsApp ‚Ä¢ BRN ‚Ä¢ VAT ‚Ä¢ Discount</b>\r\n              </div>\r\n            </div>\r\n            <div className=\"rp-exec__right\">\r\n              <span className={`rp-live ${loading ? \"is-dim\" : \"\"}`}>\r\n                <span className=\"rp-live-dot\" aria-hidden=\"true\" />\r\n                {loading ? \"Syncing\" : \"Live\"}\r\n              </span>\r\n              <span className={`rp-chip rp-chip--soft ${err ? \"rp-chip--warn\" : \"\"}`}>{err ? \"Attention needed\" : \"All systems normal\"}</span>\r\n            </div>\r\n          </section>\r\n\r\n          {/* KPI row */}\r\n          <section className=\"rp-kpi-pro rp-card-anim\">\r\n            <div className=\"rp-kpi-pro__cell\">\r\n              <div className=\"rp-kpi-pro__title\">Customers</div>\r\n              <div className=\"rp-kpi-pro__value\">{kpis.total}</div>\r\n              <div className=\"rp-kpi-pro__sub\">Filtered</div>\r\n            </div>\r\n            <div className=\"rp-kpi-pro__cell\">\r\n              <div className=\"rp-kpi-pro__title\">With VAT</div>\r\n              <div className=\"rp-kpi-pro__value\">{kpis.withVat}</div>\r\n              <div className=\"rp-kpi-pro__sub\">VAT No present</div>\r\n            </div>\r\n            <div className=\"rp-kpi-pro__cell\">\r\n              <div className=\"rp-kpi-pro__title\">With BRN</div>\r\n              <div className=\"rp-kpi-pro__value\">{kpis.withBrn}</div>\r\n              <div className=\"rp-kpi-pro__sub\">BRN present</div>\r\n            </div>\r\n            <div className=\"rp-kpi-pro__cell\">\r\n              <div className=\"rp-kpi-pro__title\">Avg Discount</div>\r\n              <div className=\"rp-kpi-pro__value\">{kpis.avgDisc}%</div>\r\n              <div className=\"rp-kpi-pro__sub\">Across results</div>\r\n            </div>\r\n          </section>\r\n\r\n          {/* Quick actions */}\r\n          <section className=\"rp-actions rp-card-anim\">\r\n            <div className=\"rp-seg rp-seg--pro\">\r\n              <button type=\"button\" className=\"rp-seg-item rp-seg-item--brand\" onClick={() => load()} disabled={loading}>\r\n                <span className=\"rp-icbtn\" aria-hidden=\"true\">\r\n                  ‚ü≥\r\n                </span>\r\n                Refresh\r\n              </button>\r\n\r\n              <Link className=\"rp-seg-item rp-seg-item--brand\" href=\"/customers/new\">\r\n                <span className=\"rp-icbtn\" aria-hidden=\"true\">\r\n                  üë§\r\n                </span>\r\n                New Customer\r\n              </Link>\r\n\r\n              {canBulkImport ? (\r\n                <Link className=\"rp-seg-item rp-seg-item--brand\" href=\"/customers/pricing-import\">\r\n                  <span className=\"rp-icbtn\" aria-hidden=\"true\">\r\n                    ‚¨Ü\r\n                  </span>\r\n                  Bulk Import\r\n                </Link>\r\n              ) : (\r\n                <button type=\"button\" className=\"rp-seg-item\" disabled title=\"Admin/Manager only\">\r\n                  <span className=\"rp-icbtn\" aria-hidden=\"true\">\r\n                    üîí\r\n                  </span>\r\n                  Bulk Import\r\n                </button>\r\n              )}\r\n            </div>\r\n          </section>\r\n\r\n          {/* Search + filters */}\r\n          <section className=\"rp-card rp-card-anim\">\r\n            <div className=\"rp-card-head rp-card-head--tight\">\r\n              <div>\r\n                <div className=\"rp-card-title\">Search & Filters</div>\r\n                <div className=\"rp-card-sub\">Code ‚Ä¢ customer ‚Ä¢ client ‚Ä¢ phone ‚Ä¢ whatsapp ‚Ä¢ BRN ‚Ä¢ VAT ‚Ä¢ discount</div>\r\n              </div>\r\n              <span className={`rp-chip ${loading ? \"is-dim\" : \"\"}`}>{loading ? \"Loading‚Ä¶\" : \"Ready\"}</span>\r\n            </div>\r\n\r\n            <div className=\"rp-card-body\">\r\n              <input className=\"rp-input rp-input--full\" placeholder=\"Search customers‚Ä¶\" value={q} onChange={(e) => setQ(e.target.value)} />\r\n\r\n              <div className=\"rp-chip-row\" style={{ display: \"flex\", gap: 10, flexWrap: \"wrap\", marginTop: 10 }}>\r\n                {[\r\n                  { key: \"ACTIVE\", label: \"Active\" },\r\n                  { key: \"ARCHIVED\", label: \"Archived\" },\r\n                  { key: \"ALL\", label: \"All\" },\r\n                ].map((x) => (\r\n                  <button\r\n                    key={x.key}\r\n                    className={`rp-filter-pill ${statusFilter === (x.key as any) ? \"rp-filter-pill--active\" : \"\"}`}\r\n                    type=\"button\"\r\n                    onClick={() => {\r\n                      const next = x.key as any;\r\n                      setStatusFilter(next);\r\n                      // fetch archived data when needed\r\n                      if (next === \"ARCHIVED\" || next === \"ALL\") load(next);\r\n                    }}\r\n                  >\r\n                    {x.label}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n\r\n              <div className=\"rp-chip-row\">\r\n                {[\r\n                  { key: \"ALL\", label: \"All\" },\r\n                  { key: \"WITH_VAT\", label: \"With VAT\" },\r\n                  { key: \"WITH_BRN\", label: \"With BRN\" },\r\n                ].map((x) => (\r\n                  <button\r\n                    key={x.key}\r\n                    className={`rp-filter-pill ${filter === (x.key as any) ? \"rp-filter-pill--active\" : \"\"}`}\r\n                    onClick={() => setFilter(x.key as any)}\r\n                    type=\"button\"\r\n                  >\r\n                    {x.label}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n\r\n              {err ? <div className=\"rp-note rp-note--warn\">{err}</div> : null}\r\n            </div>\r\n          </section>\r\n\r\n          {/* Table */}\r\n          <section className=\"rp-card rp-card-anim\">\r\n            <div className=\"rp-card-head rp-card-head--tight\">\r\n              <div>\r\n                <div className=\"rp-card-title\">Customer Register</div>\r\n                <div className=\"rp-card-sub\">Matches your import file format</div>\r\n              </div>\r\n              <span className=\"rp-chip rp-chip--soft\">{filtered.length} result(s)</span>\r\n            </div>\r\n\r\n            <div className=\"rp-card-body rp-table-wrap\">\r\n              <table className=\"rp-table rp-table--premium\">\r\n                <thead>\r\n                  <tr>\r\n                    <th style={{ width: 120 }}>Code</th>\r\n                    <th style={{ width: 220 }}>Customer</th>\r\n                    <th style={{ width: 180 }}>Client</th>\r\n                    <th>Address</th>\r\n                    <th style={{ width: 130 }}>Phone</th>\r\n                    <th style={{ width: 140 }}>WhatsApp</th>\r\n                    <th style={{ width: 150 }}>BRN</th>\r\n                    <th style={{ width: 150 }}>VAT</th>\r\n                    <th style={{ width: 110, textAlign: \"right\" }}>Discount</th>\r\n                    <th style={{ width: 80, textAlign: \"right\" }}>‚ãÆ</th>\r\n                  </tr>\r\n                </thead>\r\n\r\n                <tbody>\r\n                  {loading ? (\r\n                    <tr>\r\n                      <td colSpan={10} className=\"rp-td-empty\">\r\n                        Loading customers‚Ä¶\r\n                      </td>\r\n                    </tr>\r\n                  ) : filtered.length === 0 ? (\r\n                    <tr>\r\n                      <td colSpan={10} className=\"rp-td-empty\">\r\n                        No customers found.\r\n                      </td>\r\n                    </tr>\r\n                  ) : (\r\n                    filtered.map((c) => {\r\n                      const id = String(c.id);\r\n                      const code = safeStr(c.customer_code) || \"‚Äî\";\r\n                      const customerName = safeStr(c.name) || \"‚Äî\";\r\n                      const clientName = safeStr(c.client) || \"‚Äî\";\r\n                      const addr = safeStr(c.address) || \"‚Äî\";\r\n\r\n                      const isOpen = openMenuId === id;\r\n                      const archived = c.is_active === false;\r\n\r\n                      return (\r\n                        <tr key={id} style={archived ? { opacity: 0.72 } : undefined}>\r\n                          <td className=\"rp-strong\">{code}</td>\r\n                          <td className=\"rp-strong\">{customerName}</td>\r\n                          <td>{clientName}</td>\r\n                          <td>{addr}</td>\r\n                          <td>{safeStr(c.phone) || \"‚Äî\"}</td>\r\n                          <td>{safeStr(c.whatsapp) || \"‚Äî\"}</td>\r\n                          <td>{safeStr(c.brn) || \"‚Äî\"}</td>\r\n                          <td>{safeStr(c.vat_no) || \"‚Äî\"}</td>\r\n                          <td style={{ textAlign: \"right\", fontWeight: 950 }}>{fmtPct(c.discount_percent)}</td>\r\n\r\n                          <td style={{ textAlign: \"right\" }}>\r\n                            <div\r\n                              className=\"rp-row-actions\"\r\n                              ref={isOpen ? openMenuRef : undefined}\r\n                              style={{ position: \"relative\", display: \"inline-block\" }}\r\n                            >\r\n                              <button\r\n                                type=\"button\"\r\n                                className=\"rp-icon-btn rp-icon-btn--kebab\"\r\n                                aria-haspopup=\"menu\"\r\n                                aria-expanded={isOpen ? \"true\" : \"false\"}\r\n                                onClick={() => setOpenMenuId((cur) => (cur === id ? null : id))}\r\n                                title=\"Actions\"\r\n                              >\r\n                                ‚ãÆ\r\n                              </button>\r\n\r\n                              {isOpen ? (\r\n                                <div\r\n                                  className=\"rp-menu rp-menu--right\"\r\n                                  role=\"menu\"\r\n                                  aria-label=\"Customer actions\"\r\n                                  style={{ position: \"absolute\", right: 0, top: \"calc(100% + 8px)\", minWidth: 180, zIndex: 50 }}\r\n                                >\r\n                                  <button type=\"button\" role=\"menuitem\" className=\"rp-menu-item\" onClick={() => goTo(`/customers/${id}/edit`)}>\r\n                                    ‚úèÔ∏è Edit\r\n                                  </button>\r\n                                  <button type=\"button\" role=\"menuitem\" className=\"rp-menu-item\" onClick={() => goTo(`/customers/${id}/pricing`)}>\r\n                                    üí∞ Pricing\r\n                                  </button>\r\n                                  <button type=\"button\" role=\"menuitem\" className=\"rp-menu-item\" onClick={() => goTo(`/customers/${id}/activity`)}>\r\n                                    üìå Activity\r\n                                  </button>\r\n                                </div>\r\n                              ) : null}\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      );\r\n                    })\r\n                  )}\r\n                </tbody>\r\n              </table>\r\n\r\n              <div style={{ marginTop: 10 }} className=\"rp-muted\">\r\n                Tip: import file headers must be exactly:{\" \"}\r\n                <b>customer_code, customer_name, client_name, address, phone_no, whatsapp_no, brn, vat_no, discount</b>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          <footer className=\"rp-footer\">¬© {new Date().getFullYear()} Ram Pottery Ltd ‚Ä¢ Built by Mobiz.mu</footer>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}