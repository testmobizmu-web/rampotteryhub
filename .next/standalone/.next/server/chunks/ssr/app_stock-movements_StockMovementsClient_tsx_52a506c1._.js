module.exports=[28773,a=>{"use strict";var b=a.i(87924),c=a.i(31626),d=a.i(72131),e=a.i(88045),f=a.i(71987),g=a.i(38246);function h(a){return String(a||"").toUpperCase()}function i(a){try{return new Date(a).toLocaleString()}catch{return a}}function j(a){let b=Number(a);return Number.isFinite(b)?b:0}function k(a){let b=String(a??"");return/[,"\n\r]/.test(b)?`"${b.replace(/"/g,'""')}"`:b}function l(a){let b=a=>String(a).padStart(2,"0");return`${b(a.getDate())}/${b(a.getMonth()+1)}/${a.getFullYear()}, ${b(a.getHours())}:${b(a.getMinutes())}:${b(a.getSeconds())}`}function m(a){return a.source_table?`${a.source_table}${null!=a.source_id?` #${a.source_id}`:""}`:"â€”"}async function n(a){try{return await navigator.clipboard.writeText(a),!0}catch{try{let b=document.createElement("textarea");return b.value=a,document.body.appendChild(b),b.select(),document.execCommand("copy"),b.remove(),!0}catch{return!1}}}function o(){let[a,o]=(0,d.useState)(!1),[p,q]=(0,d.useState)(!1),[r,s]=(0,d.useState)("light"),[t,u]=(0,d.useState)("â€”"),[v,w]=(0,d.useState)(null),[x,y]=(0,d.useState)(null);function z(a){y(a),window.setTimeout(()=>y(null),2400)}let[A,B]=(0,d.useState)(!1),[C,D]=(0,d.useState)([]),[E,F]=(0,d.useState)(null),[G,H]=(0,d.useState)([]),[I,J]=(0,d.useState)(""),[K,L]=(0,d.useState)("ALL"),[M,N]=(0,d.useState)(!1),[O,P]=(0,d.useState)(""),[Q,R]=(0,d.useState)("IN"),[S,T]=(0,d.useState)("1"),[U,V]=(0,d.useState)(""),[W,X]=(0,d.useState)(""),[Y,Z]=(0,d.useState)(null),$=(0,d.useRef)(null),_=(0,d.useMemo)(()=>{let a={};for(let b of G)a[b.id]=b;return a},[G]),aa=(0,d.useMemo)(()=>{let a=0,b=0;for(let c of G){let d=j(c.current_stock),e=j(c.cost_price);b+=d,a+=d*e}return{totalStock:b,valuation:a,products:G.length}},[G]);async function ab(){try{await fetch("/api/auth/logout",{method:"POST"})}finally{localStorage.removeItem("rp_user"),window.location.href="/login"}}(0,d.useEffect)(()=>o(!0),[]),(0,d.useEffect)(()=>{let a="dark"===localStorage.getItem("rp_theme")?"dark":"light";s(a),document.documentElement.dataset.theme=a;try{let a=localStorage.getItem("rp_user");a&&w(JSON.parse(a))}catch{}u(l(new Date))},[]),(0,d.useEffect)(()=>{let a=()=>Z(null);return window.addEventListener("click",a),()=>window.removeEventListener("click",a)},[]);let ac=(0,d.useMemo)(()=>(v?.name||v?.username||"").trim()||"User",[v]);async function ad(){let{data:a,error:b}=await e.supabase.from("products").select("id, item_code, sku, name, image_url, current_stock, cost_price").order("sku",{ascending:!0});if(b)throw b;H(a??[])}async function ae(){B(!0),F(null);try{let{data:a,error:b}=await e.supabase.from("stock_movements").select("id, product_id, movement_date, movement_type, quantity, reference, notes, source_table, source_id").order("movement_date",{ascending:!1}).limit(500);if(b)throw b;D(a??[]),u(l(new Date))}catch(a){F(a?.message||a?.hint||a?.details||("string"==typeof a?a:JSON.stringify(a))||"Cannot load movements"),console.error("Stock movements load error:",a)}finally{B(!1)}}(0,d.useEffect)(()=>{(async()=>{try{await ad()}catch(a){console.error(a)}await ae()})()},[]);let af=(0,d.useMemo)(()=>{let a=I.trim().toLowerCase();return C.filter(b=>{if("ALL"!==K&&b.movement_type!==K)return!1;if(!a)return!0;let c=_[b.product_id];return[c?.item_code,c?.sku,c?.name,b.reference,b.notes,b.source_table].filter(Boolean).join(" ").toLowerCase().includes(a)})},[C,I,K,_]);async function ag(){if(!O)return void alert("Select a product");let a=Number(S);if(!Number.isFinite(a)||0===a)return void alert("Quantity must be a number (non-zero).");let b=Number(O),c=Math.abs(a),d="ADJUSTMENT"===Q?`${a<0?"ADJUSTMENT (-)":"ADJUSTMENT (+)"}${W?` â€” ${W}`:""}`:W||null;B(!0),F(null);let{error:f}=await e.supabase.from("stock_movements").insert({product_id:b,movement_type:Q,quantity:c,reference:U||null,notes:d,source_table:"manual",source_id:null});(B(!1),f)?alert(f.message):(N(!1),P(""),R("IN"),T("1"),V(""),X(""),await ad(),await ae(),z("Adjustment saved âœ…"))}(0,d.useEffect)(()=>{M&&window.setTimeout(()=>$.current?.focus(),60)},[M]),(0,d.useEffect)(()=>{if(!a)return;let b=a=>{if("Escape"===a.key){if(null!=Y){a.preventDefault(),Z(null);return}if(M){a.preventDefault(),N(!1);return}if(p){a.preventDefault(),q(!1);return}}};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[a,M,p,Y]);let ah=a&&"ADMIN"===h(v?.role),ai=(0,d.useMemo)(()=>{let a=[{href:"/",label:"Dashboard"},{href:"/invoices",label:"Invoices"},{href:"/credit-notes",label:"Credit Notes"},{href:"/stock",label:"Stock & Categories"},{href:"/stock-movements",label:"Stock Movements"},{href:"/customers",label:"Customers"},{href:"/reports",label:"Reports & Statements"}];return ah&&a.push({href:"/admin/users",label:"Users & Permissions"}),a},[ah]),aj=(0,d.useMemo)(()=>h(v?.role)||"STAFF",[v?.role]);return a?(0,b.jsxs)("div",{className:"rp-app",children:[(0,b.jsxs)("div",{className:"rp-bg","aria-hidden":"true",children:[(0,b.jsx)("div",{className:"rp-bg-orb rp-bg-orb--1"}),(0,b.jsx)("div",{className:"rp-bg-orb rp-bg-orb--2"}),(0,b.jsx)("div",{className:"rp-bg-orb rp-bg-orb--3"}),(0,b.jsx)("div",{className:"rp-bg-grid"})]}),x&&(0,b.jsx)("div",{style:{position:"fixed",right:18,top:16,zIndex:9999,padding:"10px 14px",borderRadius:14,background:"rgba(255,255,255,.92)",border:"1px solid rgba(0,0,0,.12)",boxShadow:"0 16px 50px rgba(0,0,0,.18)",fontWeight:950,backdropFilter:"blur(10px)",maxWidth:520},children:x}),(0,b.jsxs)("div",{className:"rp-shell rp-enter",children:[(0,b.jsxs)("div",{className:"rp-mtop",children:[(0,b.jsx)("button",{type:"button",className:"rp-icon-btn rp-burger",onClick:()=>q(!0),"aria-label":"Open menu",children:(0,b.jsxs)("span",{"aria-hidden":"true",children:[(0,b.jsx)("i",{}),(0,b.jsx)("i",{}),(0,b.jsx)("i",{})]})}),(0,b.jsxs)("div",{className:"rp-mtop-brand",children:[(0,b.jsx)("div",{className:"rp-mtop-title",children:"RampotteryHUB"}),(0,b.jsx)("div",{className:"rp-mtop-sub",children:"Stock Movements"})]}),(0,b.jsx)("button",{type:"button",className:"rp-icon-btn",onClick:()=>N(!0),"aria-label":"Manual adjustment",children:"ï¼‹"})]}),(0,b.jsx)("button",{className:`rp-overlay ${p?"is-open":""}`,onClick:()=>q(!1),"aria-label":"Close menu"}),(0,b.jsxs)("aside",{className:`rp-drawer ${p?"is-open":""}`,children:[(0,b.jsxs)("div",{className:"rp-drawer-head",children:[(0,b.jsxs)("div",{className:"rp-drawer-brand",children:[(0,b.jsx)("div",{className:"rp-drawer-logo",children:(0,b.jsx)(f.default,{src:"/images/logo/logo.png",alt:"Ram Pottery Ltd",width:28,height:28,priority:!0})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"rp-drawer-title",children:"RampotteryHUB"}),(0,b.jsx)("div",{className:"rp-drawer-sub",children:"Inventory audit trail"})]})]}),(0,b.jsx)("button",{type:"button",className:"rp-icon-btn",onClick:()=>q(!1),"aria-label":"Close",children:"âœ•"})]}),(0,b.jsxs)("div",{className:"rp-drawer-body",children:[(0,b.jsx)("nav",{className:"rp-nav",children:ai.map(a=>(0,b.jsxs)(g.default,{className:`rp-nav-btn ${"/stock-movements"===a.href?"rp-nav-btn--active":""}`,href:a.href,onClick:()=>q(!1),prefetch:!1,children:[(0,b.jsx)("span",{className:"rp-ic3d","aria-hidden":"true",children:"â–¶"}),a.label]},a.href))}),(0,b.jsxs)("div",{className:"rp-side-footer rp-side-footer--in",children:[(0,b.jsxs)("div",{className:"rp-role",children:[(0,b.jsx)("span",{children:"Signed in"}),(0,b.jsx)("b",{title:ac,children:ac})]}),(0,b.jsxs)("div",{className:"rp-role",style:{marginTop:10},children:[(0,b.jsx)("span",{children:"Role"}),(0,b.jsx)("b",{children:aj})]})]})]})]}),(0,b.jsx)("aside",{className:"rp-side",children:(0,b.jsxs)("div",{className:"rp-side-card rp-card-anim",children:[(0,b.jsxs)("div",{className:"rp-brand",children:[(0,b.jsx)("div",{className:"rp-brand-logo",children:(0,b.jsx)(f.default,{src:"/images/logo/logo.png",alt:"Ram Pottery Ltd",width:30,height:30,priority:!0})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"rp-brand-title",children:"RampotteryHUB"}),(0,b.jsx)("div",{className:"rp-brand-sub",children:"Accounting & Stock System"})]})]}),(0,b.jsx)("nav",{className:"rp-nav",children:ai.map(a=>(0,b.jsxs)(g.default,{className:`rp-nav-btn ${"/stock-movements"===a.href?"rp-nav-btn--active":""}`,href:a.href,prefetch:!1,children:[(0,b.jsx)("span",{className:"rp-ic3d","aria-hidden":"true",children:"â–¶"}),a.label]},a.href))}),(0,b.jsxs)("div",{className:"rp-side-footer rp-side-footer--in",children:[(0,b.jsxs)("div",{className:"rp-role",children:[(0,b.jsx)("span",{children:"Signed in"}),(0,b.jsx)("b",{title:ac,children:ac})]}),(0,b.jsxs)("div",{className:"rp-role",style:{marginTop:10},children:[(0,b.jsx)("span",{children:"Role"}),(0,b.jsx)("b",{children:aj})]})]})]})}),(0,b.jsxs)("main",{className:"rp-main",children:[(0,b.jsxs)("header",{className:"rp-top rp-top--saas rp-card-anim",style:{animationDelay:"60ms"},children:[(0,b.jsxs)("div",{className:"rp-top-left--actions",children:[(0,b.jsxs)("button",{type:"button",className:"rp-ui-btn rp-ui-btn--brand",onClick:function(){let a="dark"===r?"light":"dark";s(a),document.documentElement.dataset.theme=a,localStorage.setItem("rp_theme",a)},children:[(0,b.jsx)("span",{className:"rp-ui-btn__dot","aria-hidden":"true"}),"dark"===r?"â˜€ Light":"ðŸŒ™ Dark"]}),(0,b.jsxs)("button",{type:"button",className:"rp-ui-btn rp-ui-btn--danger",onClick:ab,children:[(0,b.jsx)("span",{className:"rp-ui-btn__dot","aria-hidden":"true"}),"Log Out"]})]}),(0,b.jsx)("div",{className:"rp-top-center--logo",children:(0,b.jsx)("div",{className:"rp-top-logo",children:(0,b.jsx)(f.default,{src:"/images/logo/logo.png",alt:"Ram Pottery",width:44,height:44,priority:!0})})}),(0,b.jsx)("div",{className:"rp-top-right--sync",children:(0,b.jsxs)("div",{className:"rp-sync",children:[(0,b.jsx)("div",{className:"rp-sync-label",children:"Last sync :"}),(0,b.jsx)("div",{className:"rp-sync-time",children:t||"â€”"})]})})]}),(0,b.jsxs)("section",{className:"rp-exec rp-card-anim",children:[(0,b.jsxs)("div",{className:"rp-exec__left",children:[(0,b.jsx)("div",{className:"rp-exec__title",children:"Stock Movements"}),(0,b.jsx)("div",{className:"rp-exec__sub",children:"Track IN â€¢ OUT â€¢ Adjustments (latest 500)"})]}),(0,b.jsxs)("div",{className:"rp-exec__right",children:[(0,b.jsxs)("span",{className:`rp-live ${A?"is-dim":""}`,children:[(0,b.jsx)("span",{className:"rp-live-dot","aria-hidden":"true"}),A?"Syncing":"Live"]}),(0,b.jsx)("span",{className:"rp-chip rp-chip--soft",children:"Inventory"})]})]}),(0,b.jsxs)("section",{className:"rp-kpi-pro rp-card-anim",children:[(0,b.jsxs)("div",{className:"rp-kpi-pro__cell",children:[(0,b.jsx)("div",{className:"rp-kpi-pro__title",children:"Products"}),(0,b.jsx)("div",{className:"rp-kpi-pro__value",children:aa.products}),(0,b.jsx)("div",{className:"rp-kpi-pro__sub",children:"Tracked"})]}),(0,b.jsxs)("div",{className:"rp-kpi-pro__cell",children:[(0,b.jsx)("div",{className:"rp-kpi-pro__title",children:"Total Stock"}),(0,b.jsx)("div",{className:"rp-kpi-pro__value",children:aa.totalStock}),(0,b.jsx)("div",{className:"rp-kpi-pro__sub",children:"pcs"})]}),(0,b.jsxs)("div",{className:"rp-kpi-pro__cell",children:[(0,b.jsx)("div",{className:"rp-kpi-pro__title",children:"Valuation"}),(0,b.jsx)("div",{className:"rp-kpi-pro__value",children:aa.valuation.toFixed(2)}),(0,b.jsx)("div",{className:"rp-kpi-pro__sub",children:"Rs (cost Ã— stock)"})]}),(0,b.jsxs)("div",{className:"rp-kpi-pro__cell",children:[(0,b.jsx)("div",{className:"rp-kpi-pro__title",children:"Loaded"}),(0,b.jsx)("div",{className:"rp-kpi-pro__value",children:C.length}),(0,b.jsx)("div",{className:"rp-kpi-pro__sub",children:"Movements"})]})]}),(0,b.jsx)("section",{className:"rp-actions rp-card-anim",children:(0,b.jsxs)("div",{className:"rp-seg rp-seg--pro",children:[(0,b.jsxs)("button",{className:"rp-seg-item rp-seg-item--brand",type:"button",onClick:()=>N(!0),children:[(0,b.jsx)("span",{className:"rp-icbtn","aria-hidden":"true",children:"ï¼‹"}),"Manual Adjustment"]}),(0,b.jsxs)("button",{className:"rp-seg-item rp-seg-item--brand",type:"button",onClick:function(){let a=["Date,Type,Qty,Item Code,SKU,Product,Reference,Source Table,Source Id,Notes"];for(let b of af){let c=_[b.product_id];a.push([k(b.movement_date),k(b.movement_type),k(b.quantity),k(c?.item_code??""),k(c?.sku??""),k(c?.name??""),k(b.reference??""),k(b.source_table??""),k(b.source_id??""),k(b.notes??"")].join(","))}let b=new Blob([a.join("\n")],{type:"text/csv;charset=utf-8"}),c=URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download=`stock-movements-${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(d),d.click(),d.remove(),URL.revokeObjectURL(c),z("CSV exported âœ…")},children:[(0,b.jsx)("span",{className:"rp-icbtn","aria-hidden":"true",children:"â‡©"}),"Export CSV"]}),(0,b.jsxs)("button",{className:"rp-seg-item rp-seg-item--brand",type:"button",onClick:ae,disabled:A,children:[(0,b.jsx)("span",{className:"rp-icbtn","aria-hidden":"true",children:"âŸ³"}),A?"Loadingâ€¦":"Refresh"]}),(0,b.jsxs)("div",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:10,flexWrap:"wrap"},children:[(0,b.jsxs)("span",{className:"rp-chip rp-chip--soft",children:["Showing ",(0,b.jsx)("b",{style:{marginLeft:6},children:af.length})]}),E?(0,b.jsx)("span",{className:"rp-chip rp-chip--warn",children:"Error"}):(0,b.jsx)("span",{className:"rp-chip",children:"Ready"})]})]})}),(0,b.jsxs)("section",{className:"rp-card rp-card-anim",children:[(0,b.jsxs)("div",{className:"rp-card-head rp-card-head--tight",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"rp-card-title",children:"Movement History"}),(0,b.jsx)("div",{className:"rp-card-sub",children:"Search item code / sku / product / reference"})]}),(0,b.jsxs)("div",{className:"rp-actions",style:{display:"flex",gap:10,flexWrap:"wrap"},children:[(0,b.jsx)("input",{className:"rp-input",placeholder:"Searchâ€¦",value:I,onChange:a=>J(a.target.value),style:{minWidth:240}}),(0,b.jsxs)("select",{className:"rp-input",value:K,onChange:a=>L(a.target.value),children:[(0,b.jsx)("option",{value:"ALL",children:"All"}),(0,b.jsx)("option",{value:"IN",children:"IN"}),(0,b.jsx)("option",{value:"OUT",children:"OUT"}),(0,b.jsx)("option",{value:"ADJUSTMENT",children:"ADJUSTMENT"})]})]})]}),(0,b.jsxs)("div",{className:"rp-card-body",children:[E&&(0,b.jsxs)("div",{className:"rp-note rp-note--warn",style:{marginBottom:12,whiteSpace:"pre-wrap"},children:[(0,b.jsx)("b",{children:"Cannot load movements:"})," ",E]}),(0,b.jsxs)("div",{className:"sm:hidden",style:{display:"grid",gap:10},children:[af.map(a=>{let c=_[a.product_id],d=c?.item_code||c?.sku||"â€”",e=c?.image_url||null,g="ADJUSTMENT"===a.movement_type?"ADJ":a.movement_type,h="ADJUSTMENT"===a.movement_type&&(a.notes||"").includes("(-)"),j="OUT"===a.movement_type?"-":"IN"===a.movement_type?"+":h?"-":"+",k="IN"===a.movement_type?"rp-pill rp-pill--in":"OUT"===a.movement_type?"rp-pill rp-pill--out":"rp-pill rp-pill--adj";return(0,b.jsxs)("div",{className:"rp-rowcard",children:[(0,b.jsxs)("div",{className:"rp-rowcard__top",children:[(0,b.jsxs)("div",{className:"rp-rowcard__left",children:[(0,b.jsx)("div",{className:"rp-rowcard__title",children:c?.name||"â€”"}),(0,b.jsxs)("div",{className:"rp-rowcard__sub",children:[(0,b.jsx)("span",{className:"rp-soft-pill",children:d}),(0,b.jsx)("span",{className:"rp-muted",style:{marginLeft:8},children:i(a.movement_date)})]})]}),(0,b.jsxs)("div",{className:"rp-rowcard__right",children:[(0,b.jsx)("span",{className:k,children:g}),(0,b.jsxs)("div",{className:"rp-rowcard__qty",children:[j,Number(a.quantity).toFixed(0)]})]})]}),(0,b.jsxs)("div",{className:"rp-rowcard__mid",children:[(0,b.jsx)("div",{className:"rp-rowcard__thumb",children:e?(0,b.jsx)("a",{className:"rp-thumb",href:e,target:"_blank",rel:"noreferrer",title:"Open image",children:(0,b.jsx)(f.default,{src:e,alt:c?.name||d,fill:!0,className:"rp-thumb-img",sizes:"60px"})}):(0,b.jsx)("div",{className:"rp-thumb rp-thumb--empty",children:(0,b.jsx)("span",{children:"â€”"})})}),(0,b.jsxs)("div",{className:"rp-rowcard__meta",children:[(0,b.jsxs)("div",{className:"rp-rowcard__line",children:[(0,b.jsx)("span",{className:"rp-muted",children:"Reference:"})," ",(0,b.jsx)("b",{children:a.reference||"â€”"})]}),(0,b.jsxs)("div",{className:"rp-rowcard__line",children:[(0,b.jsx)("span",{className:"rp-muted",children:"Source:"})," ",a.source_table?(0,b.jsx)("span",{className:"rp-soft-pill",children:m(a)}):(0,b.jsx)("b",{children:"â€”"})]}),a.notes?(0,b.jsxs)("div",{className:"rp-rowcard__notes",children:[(0,b.jsx)("span",{className:"rp-muted",children:"Notes:"})," ",a.notes]}):null]})]})]},a.id)}),!af.length&&(0,b.jsxs)("div",{className:"rp-td-empty",style:{padding:14},children:["No stock movements found.",(0,b.jsx)("div",{className:"rp-help",style:{marginTop:6},children:"Tip: movements are logged automatically on invoice ISSUED (OUT), credit note ISSUED (IN), or via manual adjustments."})]})]}),(0,b.jsx)("div",{className:"rp-table-wrap hidden sm:block",children:(0,b.jsxs)("table",{className:"rp-table rp-table--premium",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{style:{width:190},children:"Date"}),(0,b.jsx)("th",{style:{width:110},children:"Type"}),(0,b.jsx)("th",{style:{width:110,textAlign:"right"},children:"Qty"}),(0,b.jsx)("th",{style:{width:150},children:"Item Code"}),(0,b.jsx)("th",{style:{width:110},children:"Photo"}),(0,b.jsx)("th",{children:"Product"}),(0,b.jsx)("th",{style:{width:180},children:"Ref"}),(0,b.jsx)("th",{style:{width:64}})]})}),(0,b.jsxs)("tbody",{children:[af.map(a=>{let c=_[a.product_id],d=c?.item_code||c?.sku||"â€”",e=c?.image_url||null,g="IN"===a.movement_type?"rp-pill rp-pill--in":"OUT"===a.movement_type?"rp-pill rp-pill--out":"rp-pill rp-pill--adj",h="ADJUSTMENT"===a.movement_type&&a.notes?.includes("(-)")||"OUT"===a.movement_type?"-":"+";return(0,b.jsxs)("tr",{className:"rp-row-hover",children:[(0,b.jsx)("td",{children:i(a.movement_date)}),(0,b.jsx)("td",{children:(0,b.jsx)("span",{className:g,children:"ADJUSTMENT"===a.movement_type?"ADJ":a.movement_type})}),(0,b.jsxs)("td",{className:"rp-strong",style:{textAlign:"right"},children:[h,Number(a.quantity).toFixed(0)]}),(0,b.jsx)("td",{className:"rp-strong",children:d}),(0,b.jsx)("td",{children:e?(0,b.jsx)("a",{className:"rp-thumb",href:e,target:"_blank",rel:"noreferrer",title:"Open image",children:(0,b.jsx)(f.default,{src:e,alt:c?.name||d,fill:!0,className:"rp-thumb-img",sizes:"60px"})}):(0,b.jsx)("div",{className:"rp-thumb rp-thumb--empty",title:"No image",children:(0,b.jsx)("span",{children:"â€”"})})}),(0,b.jsxs)("td",{children:[c?.name||(0,b.jsx)("span",{className:"rp-muted",children:"â€”"}),a.notes?(0,b.jsx)("div",{className:"rp-muted",style:{marginTop:4},children:a.notes}):null]}),(0,b.jsx)("td",{children:a.reference?(0,b.jsx)("span",{className:"rp-soft-pill",children:a.reference}):(0,b.jsx)("span",{className:"rp-muted",children:"â€”"})}),(0,b.jsxs)("td",{className:"rp-actions-cell",children:[(0,b.jsx)("button",{type:"button",className:"rp-row-actions-btn","aria-label":"Movement actions",onClick:b=>{b.stopPropagation(),Z(Y===a.id?null:a.id)},children:"â‹®"}),Y===a.id&&(0,b.jsxs)("div",{className:"rp-row-actions-menu",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("button",{onClick:async()=>{Z(null),z(await n(m(a))?"Source copied âœ…":"Copy failed")},children:"Copy Source"}),(0,b.jsx)("button",{disabled:!a.reference,onClick:async()=>{Z(null),z(await n(a.reference||"")?"Reference copied âœ…":"Copy failed")},children:"Copy Reference"}),(0,b.jsx)("button",{disabled:!a.notes,onClick:async()=>{Z(null),z(await n(a.notes||"")?"Notes copied âœ…":"Copy failed")},children:"Copy Notes"}),(0,b.jsx)("div",{className:"rp-row-actions-sep"}),(0,b.jsx)("button",{className:"danger",disabled:!e,onClick:()=>{Z(null),e&&window.open(e,"_blank","noopener,noreferrer")},children:"Open Photo"})]})]})]},a.id)}),!af.length&&(0,b.jsx)("tr",{children:(0,b.jsxs)("td",{colSpan:8,className:"rp-td-empty",children:["No stock movements found.",(0,b.jsx)("div",{className:"rp-help",style:{marginTop:6},children:"Tip: movements are logged automatically on invoice ISSUED (OUT), credit note ISSUED (IN), or via manual adjustments."})]})})]})]})}),(0,b.jsx)("div",{className:"rp-help",style:{marginTop:10},children:"Inventory movements are logged automatically on invoices and adjustments."})]})]}),(0,b.jsxs)("footer",{className:"rp-footer",children:["Â© ",new Date().getFullYear()," Ram Pottery Ltd â€¢ Built by Mobiz.mu"]})]})]}),M&&(0,b.jsx)("div",{className:"rp-modal-backdrop",role:"dialog","aria-modal":"true",onClick:()=>N(!1),children:(0,b.jsxs)("div",{onClick:a=>a.stopPropagation(),className:"jsx-4ade53829539a300 rp-modal",children:[(0,b.jsxs)("div",{className:"jsx-4ade53829539a300 rp-modal-head",children:[(0,b.jsxs)("div",{className:"jsx-4ade53829539a300",children:[(0,b.jsx)("div",{className:"jsx-4ade53829539a300 rp-modal-title",children:"Manual Adjustment"}),(0,b.jsx)("div",{className:"jsx-4ade53829539a300 rp-modal-sub",children:"IN / OUT / ADJUSTMENT"})]}),(0,b.jsxs)("button",{type:"button",onClick:()=>N(!1),className:"jsx-4ade53829539a300 rp-ui-btn rp-ui-btn--brand",children:[(0,b.jsx)("span",{"aria-hidden":"true",className:"jsx-4ade53829539a300 rp-ui-btn__dot"}),"âœ• Close"]})]}),(0,b.jsx)("div",{className:"jsx-4ade53829539a300 rp-modal-body",children:(0,b.jsxs)("div",{className:"jsx-4ade53829539a300 rp-form-grid",children:[(0,b.jsxs)("label",{className:"jsx-4ade53829539a300 rp-field",children:[(0,b.jsx)("span",{className:"jsx-4ade53829539a300 rp-label",children:"Product"}),(0,b.jsxs)("select",{ref:$,value:O,onChange:a=>P(a.target.value?Number(a.target.value):""),className:"jsx-4ade53829539a300 rp-input",children:[(0,b.jsx)("option",{value:"",className:"jsx-4ade53829539a300",children:"Select productâ€¦"}),G.map(a=>(0,b.jsxs)("option",{value:a.id,className:"jsx-4ade53829539a300",children:[a.item_code||a.sku||"â€”"," â€” ",a.name||""]},a.id))]})]}),(0,b.jsxs)("label",{className:"jsx-4ade53829539a300 rp-field",children:[(0,b.jsx)("span",{className:"jsx-4ade53829539a300 rp-label",children:"Type"}),(0,b.jsxs)("select",{value:Q,onChange:a=>R(a.target.value),className:"jsx-4ade53829539a300 rp-input",children:[(0,b.jsx)("option",{value:"IN",className:"jsx-4ade53829539a300",children:"IN (stock in)"}),(0,b.jsx)("option",{value:"OUT",className:"jsx-4ade53829539a300",children:"OUT (stock out)"}),(0,b.jsx)("option",{value:"ADJUSTMENT",className:"jsx-4ade53829539a300",children:"ADJUSTMENT (can be + or -)"})]})]}),(0,b.jsxs)("label",{className:"jsx-4ade53829539a300 rp-field",children:[(0,b.jsx)("span",{className:"jsx-4ade53829539a300 rp-label",children:"Quantity"}),(0,b.jsx)("input",{value:S,onChange:a=>T(a.target.value),className:"jsx-4ade53829539a300 rp-input"}),(0,b.jsxs)("div",{style:{marginTop:6},className:"jsx-4ade53829539a300 rp-help",children:["For ",(0,b.jsx)("b",{className:"jsx-4ade53829539a300",children:"ADJUSTMENT"}),", you can type ",(0,b.jsx)("b",{className:"jsx-4ade53829539a300",children:"-5"})," or ",(0,b.jsx)("b",{className:"jsx-4ade53829539a300",children:"+5"}),". DB stores quantity positive; direction kept in notes."]})]}),(0,b.jsxs)("label",{className:"jsx-4ade53829539a300 rp-field",children:[(0,b.jsx)("span",{className:"jsx-4ade53829539a300 rp-label",children:"Reference"}),(0,b.jsx)("input",{value:U,onChange:a=>V(a.target.value),placeholder:"e.g. Stock count / Damage / Supplier",className:"jsx-4ade53829539a300 rp-input"})]}),(0,b.jsxs)("label",{style:{gridColumn:"1 / -1"},className:"jsx-4ade53829539a300 rp-field",children:[(0,b.jsx)("span",{className:"jsx-4ade53829539a300 rp-label",children:"Notes"}),(0,b.jsx)("textarea",{value:W,onChange:a=>X(a.target.value),rows:3,placeholder:"Optional notesâ€¦",style:{resize:"vertical"},className:"jsx-4ade53829539a300 rp-input"})]})]})}),(0,b.jsxs)("div",{className:"jsx-4ade53829539a300 rp-modal-foot",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>N(!1),disabled:A,className:"jsx-4ade53829539a300 rp-ui-btn",children:[(0,b.jsx)("span",{"aria-hidden":"true",className:"jsx-4ade53829539a300 rp-ui-btn__dot"}),"Cancel"]}),(0,b.jsxs)("button",{type:"button",onClick:ag,disabled:A,className:"jsx-4ade53829539a300 rp-ui-btn rp-ui-btn--danger",children:[(0,b.jsx)("span",{"aria-hidden":"true",className:"jsx-4ade53829539a300 rp-ui-btn__dot"}),A?"Savingâ€¦":"Save Adjustment"]})]}),(0,b.jsx)(c.default,{id:"4ade53829539a300",children:".rp-form-grid.jsx-4ade53829539a300{grid-template-columns:repeat(2,minmax(0,1fr));gap:12px;display:grid}@media (width<=780px){.rp-form-grid.jsx-4ade53829539a300{grid-template-columns:1fr}}.rp-rowcard.jsx-4ade53829539a300{border:1px solid var(--rp-border);background:var(--rp-card);border-radius:18px;padding:12px;box-shadow:0 14px 40px #00000014}.rp-rowcard__top.jsx-4ade53829539a300{justify-content:space-between;align-items:flex-start;gap:10px;display:flex}.rp-rowcard__title.jsx-4ade53829539a300{letter-spacing:-.2px;font-weight:950}.rp-rowcard__sub.jsx-4ade53829539a300{flex-wrap:wrap;align-items:center;gap:8px;margin-top:6px;font-weight:850;display:flex}.rp-rowcard__right.jsx-4ade53829539a300{flex-direction:column;align-items:flex-end;gap:8px;min-width:92px;display:flex}.rp-rowcard__qty.jsx-4ade53829539a300{font-size:16px;font-weight:980}.rp-rowcard__mid.jsx-4ade53829539a300{grid-template-columns:72px 1fr;align-items:start;gap:10px;margin-top:10px;display:grid}.rp-rowcard__thumb.jsx-4ade53829539a300{width:72px}.rp-rowcard__meta.jsx-4ade53829539a300{gap:6px;display:grid}.rp-rowcard__line.jsx-4ade53829539a300{font-weight:900}.rp-rowcard__notes.jsx-4ade53829539a300{color:var(--rp-muted);margin-top:4px;font-weight:850;line-height:1.25rem}.rp-modal-title.jsx-4ade53829539a300{letter-spacing:-.2px;font-size:18px;font-weight:950}.rp-modal-sub.jsx-4ade53829539a300{color:var(--rp-muted);margin-top:4px;font-weight:800}"})]})})]}):null}a.s(["default",()=>o])}];

//# sourceMappingURL=app_stock-movements_StockMovementsClient_tsx_52a506c1._.js.map