{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/rampotteryhub/src/lib/rpFetch.ts"],"sourcesContent":["// lib/rpFetch.ts\r\n\r\nexport type RpFetchOptions = RequestInit & {\r\n  auth?: boolean; // default true: attach x-rp-user\r\n};\r\n\r\nfunction attachAuthHeader(headers: Headers, options: RpFetchOptions) {\r\n  if (options.auth === false) return;\r\n\r\n  if (typeof window !== \"undefined\") {\r\n    const session = window.localStorage.getItem(\"rp_user\");\r\n    if (session) headers.set(\"x-rp-user\", session);\r\n  }\r\n}\r\n\r\nfunction handleAuthRedirect(res: Response) {\r\n  if (typeof window === \"undefined\") return;\r\n\r\n  if (res.status === 401 || res.status === 403) {\r\n    const next = window.location.pathname + window.location.search;\r\n    window.location.href = `/login?next=${encodeURIComponent(next)}`;\r\n  }\r\n}\r\n\r\n/**\r\n * rpFetch = fetch wrapper that injects x-rp-user and handles 401/403 redirect.\r\n * Returns the native Response (so you can do res.json(), res.text(), etc.)\r\n */\r\nexport async function rpFetch(url: string, options: RpFetchOptions = {}): Promise<Response> {\r\n  const headers = new Headers(options.headers || {});\r\n\r\n  // Default JSON header if body exists (and not FormData)\r\n  const bodyIsFormData =\r\n    typeof FormData !== \"undefined\" && options.body instanceof FormData;\r\n\r\n  if (options.body && !bodyIsFormData && !headers.has(\"Content-Type\")) {\r\n    headers.set(\"Content-Type\", \"application/json\");\r\n  }\r\n\r\n  attachAuthHeader(headers, options);\r\n\r\n  const res = await fetch(url, { ...options, headers });\r\n\r\n  // Redirect on auth issues (client-side)\r\n  handleAuthRedirect(res);\r\n\r\n  return res;\r\n}\r\n\r\n/**\r\n * Convenience helper: returns parsed JSON and throws on non-OK responses.\r\n * Useful for API routes returning { ok, ... } JSON.\r\n */\r\nexport async function rpFetchJson<T = any>(url: string, options: RpFetchOptions = {}): Promise<T> {\r\n  const res = await rpFetch(url, options);\r\n\r\n  let json: any = null;\r\n  try {\r\n    json = await res.json();\r\n  } catch {\r\n    json = null;\r\n  }\r\n\r\n  if (!res.ok) {\r\n    const msg = json?.error || `Request failed (${res.status})`;\r\n    throw new Error(msg);\r\n  }\r\n\r\n  if (json?.ok === false) {\r\n    throw new Error(json?.error || \"Request failed\");\r\n  }\r\n\r\n  return (json ?? {}) as T;\r\n}\r\n\r\n"],"names":[],"mappings":"AAAA,iBAAiB;;;;;;;AAMjB,SAAS,iBAAiB,OAAgB,EAAE,OAAuB;IACjE,IAAI,QAAQ,IAAI,KAAK,OAAO;IAE5B;;AAIF;AAEA,SAAS,mBAAmB,GAAa;IACvC,wCAAmC;;;AAMrC;AAMO,eAAe,QAAQ,GAAW,EAAE,UAA0B,CAAC,CAAC;IACrE,MAAM,UAAU,IAAI,QAAQ,QAAQ,OAAO,IAAI,CAAC;IAEhD,wDAAwD;IACxD,MAAM,iBACJ,OAAO,aAAa,eAAe,QAAQ,IAAI,YAAY;IAE7D,IAAI,QAAQ,IAAI,IAAI,CAAC,kBAAkB,CAAC,QAAQ,GAAG,CAAC,iBAAiB;QACnE,QAAQ,GAAG,CAAC,gBAAgB;IAC9B;IAEA,iBAAiB,SAAS;IAE1B,MAAM,MAAM,MAAM,MAAM,KAAK;QAAE,GAAG,OAAO;QAAE;IAAQ;IAEnD,wCAAwC;IACxC,mBAAmB;IAEnB,OAAO;AACT;AAMO,eAAe,YAAqB,GAAW,EAAE,UAA0B,CAAC,CAAC;IAClF,MAAM,MAAM,MAAM,QAAQ,KAAK;IAE/B,IAAI,OAAY;IAChB,IAAI;QACF,OAAO,MAAM,IAAI,IAAI;IACvB,EAAE,OAAM;QACN,OAAO;IACT;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,MAAM,MAAM,SAAS,CAAC,gBAAgB,EAAE,IAAI,MAAM,CAAC,CAAC,CAAC;QAC3D,MAAM,IAAI,MAAM;IAClB;IAEA,IAAI,MAAM,OAAO,OAAO;QACtB,MAAM,IAAI,MAAM,MAAM,SAAS;IACjC;IAEA,OAAQ,QAAQ,CAAC;AACnB"}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev/rampotteryhub/app/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Link from \"next/link\";\r\nimport Image from \"next/image\";\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport { rpFetch } from \"@/lib/rpFetch\";\r\n\r\ntype LowStockItem = {\r\n  id?: number | string;\r\n  item_code?: string | null;\r\n  name?: string | null;\r\n  qty?: number | null;\r\n  stock_qty?: number | null;\r\n  min_qty?: number | null;\r\n  uom?: string | null;\r\n};\r\n\r\ntype DashboardSummary = {\r\n  totalSalesToday: number;\r\n  totalSalesMonth: number;\r\n  outstanding: number;\r\n  lowStock: LowStockItem[];\r\n  recentInvoices: Array<{\r\n    id: number | string;\r\n    invoice_number?: string | null;\r\n    invoice_date?: string | null;\r\n    total_amount?: number | null;\r\n    status?: string | null;\r\n    customers?: { name?: string | null } | null;\r\n  }>;\r\n};\r\n\r\ntype RpSession = {\r\n  id?: string;\r\n  username?: string;\r\n  name?: string;\r\n  role?: string;\r\n};\r\n\r\ntype SalesMonthPoint = { ym: string; label: string; total: number };\r\n\r\nfunction formatRs(n: number) {\r\n  const v = Number.isFinite(n) ? n : 0;\r\n  const nf = new Intl.NumberFormat(\"en-US\", {\r\n    maximumFractionDigits: 0,\r\n    minimumFractionDigits: 0,\r\n  });\r\n  return `Rs ${nf.format(v)}`;\r\n}\r\n\r\n\r\nfunction fmtDateTime(d: Date) {\r\n  const pad = (x: number) => String(x).padStart(2, \"0\");\r\n  return `${pad(d.getDate())}/${pad(d.getMonth() + 1)}/${d.getFullYear()}, ${pad(\r\n    d.getHours()\r\n  )}:${pad(d.getMinutes())}:${pad(d.getSeconds())}`;\r\n}\r\n\r\nfunction normalizeStatus(s?: string | null) {\r\n  const v = (s || \"\").toLowerCase();\r\n  if (v.includes(\"paid\")) return \"paid\";\r\n  if (v.includes(\"partial\")) return \"partial\";\r\n  if (v.includes(\"void\") || v.includes(\"cancel\")) return \"void\";\r\n  if (v.includes(\"refund\")) return \"refund\";\r\n  return v || \"issued\";\r\n}\r\n\r\nfunction StatusBadge({ status }: { status?: string | null }) {\r\n  const st = normalizeStatus(status);\r\n  const cls =\r\n    st === \"paid\"\r\n      ? \"rp-badge rp-badge--paid\"\r\n      : st === \"partial\"\r\n      ? \"rp-badge rp-badge--partial\"\r\n      : st === \"void\"\r\n      ? \"rp-badge rp-badge--void\"\r\n      : st === \"refund\"\r\n      ? \"rp-badge rp-badge--refund\"\r\n      : \"rp-badge rp-badge--issued\";\r\n\r\n  const label =\r\n    st === \"paid\"\r\n      ? \"Paid\"\r\n      : st === \"partial\"\r\n      ? \"Partial\"\r\n      : st === \"void\"\r\n      ? \"Void\"\r\n      : st === \"refund\"\r\n      ? \"Refund\"\r\n      : \"Issued\";\r\n\r\n  return <span className={cls}>{label}</span>;\r\n}\r\n\r\nfunction rolePretty(role?: string) {\r\n  const r = String(role || \"STAFF\").toUpperCase();\r\n  if (r === \"STAFF\") return \"STAFF\";\r\n  if (r === \"ADMIN\") return \"ADMIN\";\r\n  if (r === \"MANAGER\") return \"MANAGER\";\r\n  return r;\r\n}\r\n\r\nfunction isAdminRole(role?: string) {\r\n  return String(role || \"\").toUpperCase() === \"ADMIN\";\r\n}\r\n\r\nfunction lowQty(item: LowStockItem) {\r\n  const q = item.qty ?? item.stock_qty ?? 0;\r\n  return Number.isFinite(Number(q)) ? Number(q) : 0;\r\n}\r\n\r\nfunction monthLabel(d: Date) {\r\n  // Short, executive, consistent (Jan, Feb, ‚Ä¶)\r\n  const m = d.toLocaleString(\"en-GB\", { month: \"short\" });\r\n  return m;\r\n}\r\nfunction ymKey(d: Date) {\r\n  const y = d.getFullYear();\r\n  const m = String(d.getMonth() + 1).padStart(2, \"0\");\r\n  return `${y}-${m}`;\r\n}\r\nfunction lastNMonths(n: number) {\r\n  const out: { d: Date; ym: string; label: string }[] = [];\r\n  const now = new Date();\r\n  for (let i = n - 1; i >= 0; i--) {\r\n    const d = new Date(now.getFullYear(), now.getMonth() - i, 1);\r\n    out.push({ d, ym: ymKey(d), label: `${monthLabel(d)} ${String(d.getFullYear()).slice(-2)}` });\r\n  }\r\n  return out;\r\n}\r\n\r\nexport default function DashboardPage() {\r\n  const [drawerOpen, setDrawerOpen] = useState(false);\r\n  const [theme, setTheme] = useState<\"light\" | \"dark\">(\"light\");\r\n  const [lastSync, setLastSync] = useState<string>(\"\");\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [data, setData] = useState<DashboardSummary | null>(null);\r\n  const [err, setErr] = useState<string | null>(null);\r\n\r\n  // chart\r\n  const [sales6m, setSales6m] = useState<SalesMonthPoint[] | null>(null);\r\n  const [sales6mLoading, setSales6mLoading] = useState(false);\r\n\r\n  // ‚úÖ SSR-safe session\r\n  const [mounted, setMounted] = useState(false);\r\n  const [session, setSession] = useState<RpSession | null>(null);\r\n\r\n  useEffect(() => {\r\n    setMounted(true);\r\n\r\n    // theme\r\n    const saved = localStorage.getItem(\"rp_theme\");\r\n    const initial = saved === \"dark\" ? \"dark\" : \"light\";\r\n    setTheme(initial);\r\n    document.documentElement.dataset.theme = initial;\r\n\r\n    // session\r\n    try {\r\n      const raw = localStorage.getItem(\"rp_user\");\r\n      if (raw) setSession(JSON.parse(raw));\r\n    } catch {\r\n      setSession(null);\r\n    }\r\n  }, []);\r\n\r\n  // lock background scroll when drawer open\r\n  useEffect(() => {\r\n    if (typeof document === \"undefined\") return;\r\n    document.body.style.overflow = drawerOpen ? \"hidden\" : \"\";\r\n    return () => {\r\n      document.body.style.overflow = \"\";\r\n    };\r\n  }, [drawerOpen]);\r\n\r\n  // close drawer on ESC\r\n  useEffect(() => {\r\n    const onKeyDown = (e: KeyboardEvent) => {\r\n      if (e.key === \"Escape\") setDrawerOpen(false);\r\n    };\r\n    window.addEventListener(\"keydown\", onKeyDown);\r\n    return () => window.removeEventListener(\"keydown\", onKeyDown);\r\n  }, [drawerOpen]);\r\n\r\n  const roleLabel = useMemo(() => rolePretty(session?.role), [session]);\r\n  const userLabel = useMemo(() => {\r\n    const name = (session?.name || session?.username || \"\").trim();\r\n    return name ? name : \"User\";\r\n  }, [session]);\r\n\r\n  const canSeeAdminNav = mounted && isAdminRole(session?.role);\r\n\r\n  function toggleTheme() {\r\n    const next = theme === \"dark\" ? \"light\" : \"dark\";\r\n    setTheme(next);\r\n    document.documentElement.dataset.theme = next;\r\n    localStorage.setItem(\"rp_theme\", next);\r\n  }\r\n\r\n  async function handleLogout() {\r\n    try {\r\n      await fetch(\"/api/auth/logout\", { method: \"POST\" });\r\n    } finally {\r\n      localStorage.removeItem(\"rp_user\");\r\n      window.location.href = \"/login\";\r\n    }\r\n  }\r\n\r\n  async function loadDashboard() {\r\n    const controller = new AbortController();\r\n\r\n    try {\r\n      setLoading(true);\r\n      setErr(null);\r\n\r\n      const res = await rpFetch(\"/api/dashboard/summary\", {\r\n        cache: \"no-store\",\r\n        signal: controller.signal,\r\n      });\r\n\r\n      if (!res.ok) {\r\n        let msg = \"\";\r\n        try {\r\n          const j = await res.json();\r\n          msg = j?.error || j?.message || \"\";\r\n        } catch {\r\n          msg = await res.text().catch(() => \"\");\r\n        }\r\n        throw new Error(msg || `Dashboard load failed (${res.status})`);\r\n      }\r\n\r\n      const json = (await res.json()) as DashboardSummary;\r\n      setData(json);\r\n      setLastSync(fmtDateTime(new Date()));\r\n    } catch (e: any) {\r\n      setErr(e?.message || \"Failed to load dashboard\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n\r\n    return () => controller.abort();\r\n  }\r\n\r\n  async function loadSalesChart() {\r\n    // Best-effort:\r\n    // 1) Try API: /api/reports/sales-6m (or you can implement server route later)\r\n    // 2) If not found / fails, fallback to placeholder bars using month total in current month.\r\n    setSales6mLoading(true);\r\n\r\n    const months = lastNMonths(6);\r\n    const fallback: SalesMonthPoint[] = months.map((m, idx) => ({\r\n      ym: m.ym,\r\n      label: m.label,\r\n      total: idx === months.length - 1 ? Number(data?.totalSalesMonth || 0) : 0,\r\n    }));\r\n\r\n    try {\r\n      const res = await rpFetch(\"/api/reports/sales-6m\", { cache: \"no-store\" });\r\n      if (!res.ok) throw new Error(\"sales-6m not available\");\r\n      const j = await res.json();\r\n      // Expect: { ok:true, series:[{ym:\"2026-01\", total:1234.56}, ...] }\r\n      const series = Array.isArray(j?.series) ? j.series : [];\r\n      const map = new Map<string, number>();\r\n      for (const p of series) {\r\n        if (p?.ym) map.set(String(p.ym), Number(p.total || 0));\r\n      }\r\n      const merged: SalesMonthPoint[] = months.map((m) => ({\r\n        ym: m.ym,\r\n        label: m.label,\r\n        total: Number(map.get(m.ym) || 0),\r\n      }));\r\n      setSales6m(merged);\r\n    } catch {\r\n      setSales6m(fallback);\r\n    } finally {\r\n      setSales6mLoading(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    void loadDashboard();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  // load chart after dashboard loads (so fallback has current month total)\r\n  useEffect(() => {\r\n    if (!mounted) return;\r\n    void loadSalesChart();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [mounted, data?.totalSalesMonth]);\r\n\r\n  const salesToday = data?.totalSalesToday ?? 0;\r\n  const salesMonth = data?.totalSalesMonth ?? 0;\r\n  const outstanding = data?.outstanding ?? 0;\r\n  const lowStockItems = Array.isArray(data?.lowStock) ? data!.lowStock : [];\r\n  const lowStockCount = lowStockItems.length;\r\n  const recent = data?.recentInvoices ?? [];\r\n\r\n  const lowStockTop = useMemo(() => {\r\n    const copy = [...lowStockItems];\r\n    copy.sort((a, b) => lowQty(a) - lowQty(b));\r\n    return copy.slice(0, 6);\r\n  }, [lowStockItems]);\r\n\r\n  // ‚úÖ Base nav (stable server/client)\r\n  const baseNav = [\r\n    { href: \"/\", label: \"Dashboard\" },\r\n    { href: \"/invoices\", label: \"Invoices\" },\r\n    { href: \"/credit-notes\", label: \"Credit Notes\" },\r\n\r\n    // ‚úÖ updated route\r\n    { href: \"/products\", label: \"Stock & Categories\" },\r\n\r\n    { href: \"/stock-movements\", label: \"Stock Movements\" },\r\n    { href: \"/customers\", label: \"Customers\" },\r\n\r\n    // ‚úÖ new\r\n    { href: \"/suppliers\", label: \"Suppliers\" },\r\n\r\n    { href: \"/reports\", label: \"Reports & Statements\" },\r\n  ];\r\n\r\n  const navItems = useMemo(() => {\r\n    const list = [...baseNav];\r\n    if (canSeeAdminNav) list.push({ href: \"/admin/users\", label: \"Users & Permissions\" });\r\n    return list;\r\n  }, [canSeeAdminNav]);\r\n\r\n  // chart derived UI\r\n  const chart = sales6m || lastNMonths(6).map((m) => ({ ym: m.ym, label: m.label, total: 0 }));\r\n  const chartMax = Math.max(1, ...chart.map((p) => Number(p.total || 0)));\r\n\r\n  const SideContent = (\r\n    <div\r\n      className=\"rp-side-card rp-card-anim\"\r\n      style={{\r\n        // ‚úÖ make sidebar background longer and footer stick to bottom\r\n        minHeight: \"100vh\",\r\n        paddingBottom: 18,\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n      }}\r\n    >\r\n      <div className=\"rp-brand\">\r\n        <div className=\"rp-brand-logo\">\r\n          <Image src=\"/images/logo/logo.png\" alt=\"Ram Pottery Ltd\" width={30} height={30} priority />\r\n        </div>\r\n        <div>\r\n          <div className=\"rp-brand-title\">RampotteryHUB</div>\r\n          <div className=\"rp-brand-sub\">Accounting & Stock System</div>\r\n        </div>\r\n      </div>\r\n\r\n      <nav className=\"rp-nav\" style={{ flex: 1 }}>\r\n        {navItems.map((n) => (\r\n          <Link\r\n            key={n.href}\r\n            className={`rp-nav-btn ${n.href === \"/\" ? \"rp-nav-btn--active\" : \"\"}`}\r\n            href={n.href}\r\n            onClick={() => setDrawerOpen(false)}\r\n            prefetch={false}\r\n          >\r\n            <span className=\"rp-ic3d\" aria-hidden=\"true\">\r\n              ‚ñ∂\r\n            </span>\r\n            {n.label}\r\n          </Link>\r\n        ))}\r\n      </nav>\r\n\r\n      <div className=\"rp-side-footer rp-side-footer--in\" style={{ marginTop: \"auto\" }}>\r\n        <div className=\"rp-role\">\r\n          <span>Signed in</span>\r\n          <b title={userLabel}>{mounted ? userLabel : \"‚Äî\"}</b>\r\n        </div>\r\n        <div className=\"rp-role\" style={{ marginTop: 10 }}>\r\n          <span>Role</span>\r\n          <b>{mounted ? roleLabel : \"‚Äî\"}</b>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"rp-app\">\r\n      <div className=\"rp-bg\" aria-hidden=\"true\">\r\n        <div className=\"rp-bg-orb rp-bg-orb--1\" />\r\n        <div className=\"rp-bg-orb rp-bg-orb--2\" />\r\n        <div className=\"rp-bg-orb rp-bg-orb--3\" />\r\n        <div className=\"rp-bg-grid\" />\r\n      </div>\r\n\r\n      <div className=\"rp-shell rp-enter\">\r\n        {/* Mobile top bar */}\r\n        <div className=\"rp-mtop\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"rp-icon-btn rp-burger\"\r\n            onClick={() => setDrawerOpen(true)}\r\n            aria-label=\"Open menu\"\r\n          >\r\n            <span aria-hidden=\"true\">\r\n              <i />\r\n              <i />\r\n              <i />\r\n            </span>\r\n          </button>\r\n\r\n          <div className=\"rp-mtop-brand\">\r\n            <div className=\"rp-mtop-title\">RampotteryHUB</div>\r\n            <div className=\"rp-mtop-sub\">Executive Dashboard</div>\r\n          </div>\r\n\r\n          <button type=\"button\" className=\"rp-icon-btn\" onClick={toggleTheme} aria-label=\"Toggle theme\" title=\"Toggle theme\">\r\n            {theme === \"dark\" ? \"‚òÄ\" : \"üåô\"}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Overlay + Drawer */}\r\n        <button\r\n          className={`rp-overlay ${drawerOpen ? \"is-open\" : \"\"}`}\r\n          onClick={() => setDrawerOpen(false)}\r\n          aria-label=\"Close menu\"\r\n        />\r\n        <aside className={`rp-drawer ${drawerOpen ? \"is-open\" : \"\"}`}>\r\n          <div className=\"rp-drawer-head\">\r\n            <div className=\"rp-drawer-brand\">\r\n              <div className=\"rp-drawer-logo\">\r\n                <Image src=\"/images/logo/logo.png\" alt=\"Ram Pottery Ltd\" width={28} height={28} priority />\r\n              </div>\r\n              <div>\r\n                <div className=\"rp-drawer-title\">RampotteryHUB</div>\r\n                <div className=\"rp-drawer-sub\">Accounting & Stock System</div>\r\n              </div>\r\n            </div>\r\n\r\n            <button type=\"button\" className=\"rp-icon-btn\" onClick={() => setDrawerOpen(false)} aria-label=\"Close\">\r\n              ‚úï\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"rp-drawer-body\">{SideContent}</div>\r\n        </aside>\r\n\r\n        {/* Desktop sidebar */}\r\n        <aside className=\"rp-side\">{SideContent}</aside>\r\n\r\n        {/* Main */}\r\n        <main className=\"rp-main\">\r\n          {/* Top bar */}\r\n          <header className=\"rp-top rp-top--saas rp-card-anim\" style={{ animationDelay: \"60ms\" }}>\r\n            <div className=\"rp-top-left--actions\">\r\n              <button type=\"button\" className=\"rp-ui-btn rp-ui-btn--brand\" onClick={toggleTheme} title=\"Toggle theme\">\r\n                <span className=\"rp-ui-btn__dot\" aria-hidden=\"true\" />\r\n                {theme === \"dark\" ? \"‚òÄ Light\" : \"üåô Dark\"}\r\n              </button>\r\n\r\n              <button type=\"button\" className=\"rp-ui-btn rp-ui-btn--danger\" onClick={handleLogout} title=\"Logout\">\r\n                <span className=\"rp-ui-btn__dot\" aria-hidden=\"true\" />\r\n                Log Out\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"rp-top-center--logo\">\r\n              <div className=\"rp-top-logo\">\r\n                <Image src=\"/images/logo/logo.png\" alt=\"Ram Pottery\" width={44} height={44} priority />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"rp-top-right--sync\">\r\n              <div className=\"rp-sync\">\r\n                <div className=\"rp-sync-label\">Last sync :</div>\r\n                <div className=\"rp-sync-time\">{lastSync || \"‚Äî\"}</div>\r\n              </div>\r\n            </div>\r\n          </header>\r\n\r\n          {/* Executive header */}\r\n          <section className=\"rp-exec rp-card-anim\">\r\n            <div className=\"rp-exec__left\">\r\n              <div className=\"rp-exec__title\">Executive Overview</div>\r\n              <div className=\"rp-exec__sub\">Sales performance + operational alerts + quick actions</div>\r\n            </div>\r\n            <div className=\"rp-exec__right\">\r\n              <span className={`rp-live ${loading ? \"is-dim\" : \"\"}`}>\r\n                <span className=\"rp-live-dot\" aria-hidden=\"true\" />\r\n                {loading ? \"Syncing\" : \"Live\"}\r\n              </span>\r\n              <span className={`rp-chip rp-chip--soft ${err ? \"rp-chip--warn\" : \"\"}`}>\r\n                {err ? \"Attention needed\" : \"All systems normal\"}\r\n              </span>\r\n            </div>\r\n          </section>\r\n\r\n          {/* Actions */}\r\n          <section className=\"rp-actions rp-card-anim\">\r\n            <div className=\"rp-seg rp-seg--pro\">\r\n              <Link className=\"rp-seg-item rp-seg-item--brand\" href=\"/invoices/new\">\r\n                <span className=\"rp-icbtn\" aria-hidden=\"true\">\r\n                  üßæ\r\n                </span>\r\n                New Invoice\r\n              </Link>\r\n\r\n              <Link className=\"rp-seg-item rp-seg-item--brand\" href=\"/invoices\">\r\n                <span className=\"rp-icbtn\" aria-hidden=\"true\">\r\n                  üñ®Ô∏è\r\n                </span>\r\n                Reprint Invoices\r\n              </Link>\r\n\r\n              <Link className=\"rp-seg-item rp-seg-item--brand\" href=\"/credit-notes\">\r\n                <span className=\"rp-icbtn\" aria-hidden=\"true\">\r\n                  üßæ\r\n                </span>\r\n                Credit Notes\r\n              </Link>\r\n\r\n              <Link className=\"rp-seg-item rp-seg-item--brand\" href=\"/products/import\">\r\n                <span className=\"rp-icbtn\" aria-hidden=\"true\">\r\n                  üì¶\r\n                </span>\r\n                Import Stock\r\n              </Link>\r\n\r\n              <Link className=\"rp-seg-item rp-seg-item--brand\" href=\"/suppliers\">\r\n                <span className=\"rp-icbtn\" aria-hidden=\"true\">\r\n                  ü§ù\r\n                </span>\r\n                Suppliers\r\n              </Link>\r\n\r\n              <button\r\n                type=\"button\"\r\n                className=\"rp-seg-item\"\r\n                onClick={() => {\r\n                  void loadDashboard();\r\n                  void loadSalesChart();\r\n                }}\r\n              >\r\n                <span className=\"rp-icbtn\" aria-hidden=\"true\">\r\n                  ‚ü≥\r\n                </span>\r\n                Refresh\r\n              </button>\r\n            </div>\r\n          </section>\r\n\r\n          {/* KPIs */}\r\n          <section className=\"rp-kpi-pro rp-card-anim\">\r\n            <div className=\"rp-kpi-pro__cell\">\r\n              <div className=\"rp-kpi-pro__title\">Sales Today</div>\r\n              <div className=\"rp-kpi-pro__value\">{formatRs(salesToday)}</div>\r\n              <div className=\"rp-kpi-pro__sub\">Invoices dated today</div>\r\n            </div>\r\n            <div className=\"rp-kpi-pro__cell\">\r\n              <div className=\"rp-kpi-pro__title\">Sales This Month</div>\r\n              <div className=\"rp-kpi-pro__value\">{formatRs(salesMonth)}</div>\r\n              <div className=\"rp-kpi-pro__sub\">Month to date</div>\r\n            </div>\r\n            <div className=\"rp-kpi-pro__cell\">\r\n              <div className=\"rp-kpi-pro__title\">Outstanding</div>\r\n              <div className=\"rp-kpi-pro__value\">{formatRs(outstanding)}</div>\r\n              <div className=\"rp-kpi-pro__sub\">Total balance due</div>\r\n            </div>\r\n            <div className=\"rp-kpi-pro__cell\">\r\n              <div className=\"rp-kpi-pro__title\">Low Stock</div>\r\n              <div className=\"rp-kpi-pro__value\">{lowStockCount}</div>\r\n              <div className=\"rp-kpi-pro__sub\">Reorder suggested</div>\r\n            </div>\r\n          </section>\r\n\r\n          {/* Sales chart + Alerts + Status */}\r\n          <section className=\"rp-grid2 rp-card-anim\">\r\n            {/* LEFT STACK */}\r\n            <div className=\"rp-stack\">\r\n              {/* Sales Chart (above stock alerts) */}\r\n              <div className=\"rp-card rp-glass\">\r\n                <div className=\"rp-card-head\">\r\n                  <div>\r\n                    <div className=\"rp-card-title\">Sales Trend</div>\r\n                    <div className=\"rp-card-sub\">Last 6 months (auto)</div>\r\n                  </div>\r\n                  <span className=\"rp-pill\">\r\n                    {sales6mLoading ? \"Updating‚Ä¶\" : \"Executive view\"}\r\n                  </span>\r\n                </div>\r\n\r\n                <div className=\"rp-card-body\">\r\n                  <div className=\"rp-chart\">\r\n                    {chart.map((p) => {\r\n                      const v = Number(p.total || 0);\r\n                      const pct = Math.max(3, Math.round((v / chartMax) * 100)); // keep tiny bars visible\r\n                      return (\r\n                        <div key={p.ym} className=\"rp-chart-col\">\r\n                          <div className=\"rp-chart-top\">\r\n                            <span className=\"rp-chart-val\">{formatRs(v)}</span>\r\n                          </div>\r\n                          <div className=\"rp-chart-barwrap\">\r\n                            <div className=\"rp-chart-bar\" style={{ height: `${pct}%` }} />\r\n                          </div>\r\n                          <div className=\"rp-chart-label\">{p.label}</div>\r\n                        </div>\r\n                      );\r\n                    })}\r\n                  </div>\r\n\r\n                  <div className=\"rp-chart-foot\">\r\n                    <span className=\"rp-soft-pill\">Max: {formatRs(chartMax)}</span>\r\n                    <span className=\"rp-soft-pill\">This month: {formatRs(salesMonth)}</span>\r\n                    <span className=\"rp-soft-pill\">Today: {formatRs(salesToday)}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Low Stock Alerts */}\r\n              <div className=\"rp-card rp-glass\" style={{ marginTop: 14 }}>\r\n                <div className=\"rp-card-head\">\r\n                  <div>\r\n                    <div className=\"rp-card-title\">Low Stock Alerts</div>\r\n                    <div className=\"rp-card-sub\">Top items needing reorder</div>\r\n                  </div>\r\n                  <Link className=\"rp-link-btn\" href=\"/products\">\r\n                    Open stock ‚Üí\r\n                  </Link>\r\n                </div>\r\n\r\n                <div className=\"rp-card-body\">\r\n                  {loading ? (\r\n                    <div className=\"rp-empty\">\r\n                      <b>Loading‚Ä¶</b>\r\n                      <span>Checking inventory levels.</span>\r\n                    </div>\r\n                  ) : err ? (\r\n                    <div className=\"rp-empty\">\r\n                      <b>Could not load stock alerts</b>\r\n                      <span>{err}</span>\r\n                    </div>\r\n                  ) : lowStockTop.length === 0 ? (\r\n                    <div className=\"rp-empty\">\r\n                      <b>All good</b>\r\n                      <span>No low-stock items detected.</span>\r\n                    </div>\r\n                  ) : (\r\n                    <div className=\"rp-alerts\">\r\n                      {lowStockTop.map((p, idx) => {\r\n                        const code = (p.item_code || \"\").trim() || `ITEM-${idx + 1}`;\r\n                        const name = (p.name || \"\").trim() || \"Unnamed product\";\r\n                        const qty = lowQty(p);\r\n                        const min = Number(p.min_qty ?? 0) || 0;\r\n\r\n                        return (\r\n                          <div className=\"rp-alert-row\" key={`${code}-${idx}`}>\r\n                            <div className=\"rp-alert-left\">\r\n                              <div className=\"rp-alert-code\">{code}</div>\r\n                              <div className=\"rp-alert-name\" title={name}>\r\n                                {name}\r\n                              </div>\r\n                            </div>\r\n\r\n                            <div className=\"rp-alert-right\">\r\n                              <span className={`rp-pill2 ${qty <= 0 ? \"rp-pill2--danger\" : \"rp-pill2--warn\"}`}>\r\n                                {qty} in stock\r\n                              </span>\r\n                              <span className=\"rp-pill2 rp-pill2--soft\">Min {min}</span>\r\n                            </div>\r\n                          </div>\r\n                        );\r\n                      })}\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* RIGHT: System Status */}\r\n            <div className=\"rp-card rp-glass\">\r\n              <div className=\"rp-card-head\">\r\n                <div>\r\n                  <div className=\"rp-card-title\">System Status</div>\r\n                  <div className=\"rp-card-sub\">Operational overview</div>\r\n                </div>\r\n                <span className=\"rp-pill\">Secure</span>\r\n              </div>\r\n\r\n              <div className=\"rp-card-body\">\r\n                <div className=\"rp-status\">\r\n                  <div className=\"rp-status-row\">\r\n                    <span className=\"rp-status-k\">Data sync</span>\r\n                    <span className={`rp-status-v ${loading ? \"is-dim\" : \"\"}`}>{loading ? \"Syncing‚Ä¶\" : \"OK\"}</span>\r\n                  </div>\r\n                  <div className=\"rp-status-row\">\r\n                    <span className=\"rp-status-k\">Invoices</span>\r\n                    <span className=\"rp-status-v\">Ready</span>\r\n                  </div>\r\n                  <div className=\"rp-status-row\">\r\n                    <span className=\"rp-status-k\">Stock</span>\r\n                    <span className=\"rp-status-v\">{lowStockCount > 0 ? \"Attention\" : \"OK\"}</span>\r\n                  </div>\r\n                  <div className=\"rp-status-row\">\r\n                    <span className=\"rp-status-k\">Suppliers</span>\r\n                    <span className=\"rp-status-v\">Ready</span>\r\n                  </div>\r\n                  <div className=\"rp-status-row\">\r\n                    <span className=\"rp-status-k\">Role</span>\r\n                    <span className=\"rp-status-v\">{mounted ? roleLabel : \"‚Äî\"}</span>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"rp-status-note\">\r\n                  Premium executive dashboard ‚Äî lightweight, fast, and focused on action.\r\n                </div>\r\n\r\n                <div style={{ marginTop: 14, display: \"grid\", gap: 10 }}>\r\n                  <Link className=\"rp-link-btn\" href=\"/products\">\r\n                    Stock & Categories ‚Üí\r\n                  </Link>\r\n                  <Link className=\"rp-link-btn\" href=\"/suppliers\">\r\n                    Suppliers ‚Üí\r\n                  </Link>\r\n                  <Link className=\"rp-link-btn\" href=\"/reports\">\r\n                    Reports & Statements ‚Üí\r\n                  </Link>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n\r\n          {/* Recent invoices */}\r\n          <section className=\"rp-card rp-card-anim\">\r\n            <div className=\"rp-card-head rp-card-head--tight\">\r\n              <div>\r\n                <div className=\"rp-card-title\">Recent Invoices</div>\r\n                <div className=\"rp-card-sub\">Latest 10</div>\r\n              </div>\r\n              <Link className=\"rp-link-btn\" href=\"/invoices\">\r\n                View all ‚Üí\r\n              </Link>\r\n            </div>\r\n\r\n            <div className=\"rp-card-body\">\r\n              {loading ? (\r\n                <div className=\"rp-empty\">\r\n                  <b>Loading recent invoices‚Ä¶</b>\r\n                  <span>Please wait.</span>\r\n                </div>\r\n              ) : err ? (\r\n                <div className=\"rp-empty\">\r\n                  <b>Could not load invoices</b>\r\n                  <span>{err}</span>\r\n                </div>\r\n              ) : (\r\n                <div className=\"rp-table-wrap\">\r\n                  <table className=\"rp-table\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th>Invoice</th>\r\n                        <th>Date</th>\r\n                        <th>Customer</th>\r\n                        <th>Total</th>\r\n                        <th>Status</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {recent.length === 0 ? (\r\n                        <tr>\r\n                          <td className=\"rp-td-empty\" colSpan={5}>\r\n                            No invoices yet.\r\n                          </td>\r\n                        </tr>\r\n                      ) : (\r\n                        recent.map((inv) => (\r\n                          <tr key={String(inv.id)}>\r\n                            <td className=\"rp-strong\">\r\n                              <Link className=\"rp-row-link\" href={`/invoices/${inv.id}`}>\r\n                                {inv.invoice_number || `#${inv.id}`}\r\n                              </Link>\r\n                            </td>\r\n                            <td>{inv.invoice_date || \"‚Äî\"}</td>\r\n                            <td>{inv.customers?.name || \"‚Äî\"}</td>\r\n                            <td className=\"rp-strong\">{formatRs(Number(inv.total_amount || 0))}</td>\r\n                            <td>\r\n                              <StatusBadge status={inv.status} />\r\n                            </td>\r\n                          </tr>\r\n                        ))\r\n                      )}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </section>\r\n\r\n          <footer className=\"rp-footer\">\r\n            ¬© 2026 Ram Pottery Ltd - <span>Built by Mobiz.mu</span>\r\n          </footer>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}